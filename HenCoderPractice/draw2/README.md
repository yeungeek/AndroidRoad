 # HenCoder Android å¼€å‘è¿›é˜¶: è‡ªå®šä¹‰ View 1-2 Paint è¯¦è§£ 
è¿™æœŸæ˜¯ HenCoder è‡ªå®šä¹‰ç»˜åˆ¶çš„ç¬¬äºŒæœŸï¼š `Paint`ã€‚å¦‚æœä½ æ²¡çœ‹è¿‡ç¬¬ä¸€æœŸï¼Œå¯ä»¥å…ˆå»çœ‹ä¸€ä¸‹ç¬¬ä¸€æœŸï¼š [HenCoder
Android å¼€å‘è¿›é˜¶ï¼šè‡ªå®šä¹‰ View 1-1 ç»˜åˆ¶åŸºç¡€](http://hencoder.com/ui-1-1) ## ç®€ä»‹ ä¸Šä¸€æœŸæˆ‘å·²ç»ç®€å•è¯´è¿‡ï¼Œ
`Canvas` çš„ `drawXXX()` æ–¹æ³•é…åˆ `Paint` çš„å‡ ä¸ªå¸¸ç”¨æ–¹æ³•å¯ä»¥å®ç°æœ€å¸¸è§çš„ç»˜åˆ¶éœ€æ±‚ï¼›è€Œå¦‚æœä½ åªä¼šåŸºæœ¬çš„ç»˜åˆ¶ï¼Œ `Paint`
çš„å®Œå…¨åŠŸèƒ½çš„æŒæ¡ï¼Œèƒ½è®©ä½ æ›´è¿›ä¸€æ­¥ï¼Œåšå‡ºä¸€äº›æ›´åŠ ç»†è‡´ã€ç‚«é…·çš„æ•ˆæœã€‚æŠŠ `Paint` æŒæ¡ä¹‹åï¼Œä½ å‡ ä¹ä¸å†ä¼šé‡åˆ°ã€ŒiOS
ç»„å¯ä»¥å®ç°ï¼Œä½†ä½ å´å®ç°ä¸äº†ã€çš„ç»˜åˆ¶æ•ˆæœã€‚
![](https://ws3.sinaimg.cn/large/52eb2279ly1fig6d7kcppj207807t0tv.jpg)
ç”±äºä¾ç„¶æ˜¯è®²ç»˜åˆ¶çš„ï¼Œæ‰€ä»¥è¿™æœŸå°±æ²¡æœ‰ä»‹ç»è§†é¢‘äº†ã€‚ç»˜åˆ¶çš„å†…å®¹ä¸€å…±éœ€è¦è®²å¤§æ¦‚ 5~6 æœŸæ‰èƒ½è®²å®Œï¼Œä¹Ÿå°±æ˜¯è¯´ä½ è¦çœ‹ 5~6
æœŸæ‰èƒ½æˆä¸ºè‡ªå®šä¹‰ç»˜åˆ¶çš„é«˜æ‰‹ã€‚ç›¸å¯¹äºä¸ŠæœŸçš„å†…å®¹ï¼Œè¿™æœŸçš„å†…å®¹æ›´ä¸ºä¸“é¡¹ã€æ·±åº¦æ›´æ·±ã€‚å¯¹äºæ²¡æœ‰æ·±å…¥ç ”ç©¶è¿‡ `Paint` çš„äººï¼Œè¿™æœŸæ˜¯ä¸€ä¸ªå¯¹ `Paint`
çš„è¯ é‡Šï¼›è€Œå¯¹äºå°è¯•è¿‡ç ”ç©¶ `Paint` ä½†ä»ç„¶å¯¹å…¶ä¸­ä¸€äº› API æœ‰ç–‘æƒ‘çš„äººï¼Œè¿™æœŸä¹Ÿå¯ä»¥å¸®ä½ è§£æƒ‘ã€‚
å¦å¤–ï¼Œä¹Ÿæ­£ç”±äºè¿™æœŸçš„å†…å®¹æ˜¯æ›´ä¸ºä¸“é¡¹çš„ï¼Œæ‰€ä»¥å»ºè®®ä½ åœ¨çœ‹çš„æ—¶å€™ï¼Œä¸å¿…åƒä¸ŠæœŸé‚£æ ·æŠŠæ‰€æœ‰ä¸œè¥¿éƒ½å®Œå…¨è®°ä½ï¼Œè€Œæ˜¯åªè¦æŠŠå†…å®¹ç†è§£äº†å°±å¥½ã€‚è¿™æœŸçš„å†…å®¹ï¼Œåªè¦åšåˆ°ã€ŒçŸ¥é“æœ‰è¿™ä¹ˆä¸ªä¸œè¥¿ã€ï¼Œåœ¨éœ€è¦ç”¨åˆ°çš„æ—¶å€™èƒ½æƒ³èµ·æ¥è¿™ä¸ªåŠŸèƒ½èƒ½ä¸èƒ½åšã€å¤§è‡´ç”¨ä»€ä¹ˆåšå°±å¥½ï¼Œè‡³äºå…·ä½“çš„å®ç°ï¼Œåˆ°æ—¶å€™æ‹å›æ¥å†ç¿»ä¸€æ¬¡å°±è¡Œäº†ã€‚
å¥½ï¼Œä¸‹é¢è¿›å…¥æ­£é¢˜ã€‚ `Paint` çš„ API å¤§è‡´å¯ä»¥åˆ†ä¸º 4 ç±»ï¼š * é¢œè‰² * æ•ˆæœ * drawText() ç›¸å…³ * åˆå§‹åŒ– ä¸‹é¢æˆ‘å°±å¯¹è¿™ 4
ç±»åˆ†åˆ«è¿›è¡Œä»‹ç»ï¼š ## 1 é¢œè‰² `Canvas` ç»˜åˆ¶çš„å†…å®¹ï¼Œæœ‰ä¸‰å±‚å¯¹é¢œè‰²çš„å¤„ç†ï¼š
![](https://ws3.sinaimg.cn/large/52eb2279ly1fig6dcywn2j20j909yabu.jpg) >
è¿™å›¾å¤§æ¦‚çœ‹çœ‹å°±è¡Œï¼Œä¸ç”¨é’»ç ”æ˜ç™½å†å¾€ä¸‹çœ‹ï¼Œå› ä¸ºç­‰è¿™ç« è®²å®Œä½ å°±æ‡‚äº†ã€‚ ### 1.1 åŸºæœ¬é¢œè‰² åƒç´ çš„åŸºæœ¬é¢œè‰²ï¼Œæ ¹æ®ç»˜åˆ¶å†…å®¹çš„ä¸åŒè€Œæœ‰ä¸åŒçš„æ§åˆ¶æ–¹å¼ï¼š
`Canvas` çš„é¢œè‰²å¡«å……ç±»æ–¹æ³• `drawColor/RGB/ARGB()` çš„é¢œè‰²ï¼Œæ˜¯ç›´æ¥å†™åœ¨æ–¹æ³•çš„å‚æ•°é‡Œï¼Œé€šè¿‡å‚æ•°æ¥è®¾ç½®çš„ï¼ˆä¸ŠæœŸè®²è¿‡äº†ï¼‰ï¼›
`drawBitmap()` çš„é¢œè‰²ï¼Œæ˜¯ç›´æ¥ç”± `Bitmap` å¯¹è±¡æ¥æä¾›çš„ï¼ˆä¸ŠæœŸä¹Ÿè®²è¿‡äº†ï¼‰ï¼›é™¤æ­¤ä¹‹å¤–ï¼Œæ˜¯å›¾å½¢å’Œæ–‡å­—çš„ç»˜åˆ¶ï¼Œå®ƒä»¬çš„é¢œè‰²å°±éœ€è¦ä½¿ç”¨
`paint` å‚æ•°æ¥é¢å¤–è®¾ç½®äº†ï¼ˆä¸‹é¢è¦è®²çš„ï¼‰ã€‚
![](https://ws3.sinaimg.cn/large/52eb2279ly1fig6gxcusnj20iw04xmzr.jpg) `Paint`
è®¾ç½®é¢œè‰²çš„æ–¹æ³•æœ‰ä¸¤ç§ï¼šä¸€ç§æ˜¯ç›´æ¥ç”¨ `Paint.setColor/ARGB()` æ¥è®¾ç½®é¢œè‰²ï¼Œå¦ä¸€ç§æ˜¯ä½¿ç”¨ `Shader` æ¥æŒ‡å®šç€è‰²æ–¹æ¡ˆã€‚ ####
1.1.1 ç›´æ¥è®¾ç½®é¢œè‰² ##### 1.1.1.1 setColor(int color)
æ–¹æ³•åå’Œä½¿ç”¨æ–¹æ³•éƒ½éå¸¸ç®€å•ç›´æ¥ï¼Œè€Œä¸”è¿™ä¸ªæ–¹æ³•åœ¨ä¸ŠæœŸå·²ç»ä»‹ç»è¿‡äº†ï¼Œä¸å†å¤šè¯´ã€‚
paint.setColor(Color.parseColor("#009688")); canvas.drawRect(30, 30, 230, 180,
paint); paint.setColor(Color.parseColor("#FF9800")); canvas.drawLine(300, 30,
450, 180, paint); paint.setColor(Color.parseColor("#E91E63"));
canvas.drawText("HenCoder", 500, 130, paint);
![](https://ws3.sinaimg.cn/large/52eb2279ly1fig6di0nzij20js05pab1.jpg) >
`setColor()` å¯¹åº”çš„ get æ–¹æ³•æ˜¯ `getColor()` ##### 1.1.1.2 setARGB(int a, int r, int
g, int b) å…¶å®å’Œ `setColor(color)`
éƒ½æ˜¯ä¸€æ ·ä¸€æ ·å„¿çš„ï¼Œåªæ˜¯å®ƒçš„å‚æ•°ç”¨çš„æ˜¯æ›´ç›´æ¥çš„ä¸‰åŸè‰²ä¸é€æ˜åº¦çš„å€¼ã€‚å®é™…è¿ç”¨ä¸­ï¼Œ`setColor()` å’Œ `setARGB()` å“ªä¸ªæ–¹ä¾¿å’Œé¡ºæ‰‹ç”¨å“ªä¸ªå§ã€‚
paint.setARGB(100, 255, 0, 0); canvas.drawRect(0, 0, 200, 200, paint);
paint.setARGB(100, 0, 0, 0); canvas.drawLine(0, 0, 200, 200, paint); ####
1.1.2 setShader(Shader shader) è®¾ç½® Shader é™¤äº†ç›´æ¥è®¾ç½®é¢œè‰²ï¼Œ `Paint` è¿˜å¯ä»¥ä½¿ç”¨ `Shader` ã€‚
Shader è¿™ä¸ªè‹±æ–‡å•è¯å¾ˆå¤šäººæ²¡æœ‰è§è¿‡ï¼Œå®ƒçš„ä¸­æ–‡å«åšã€Œç€è‰²å™¨ã€ï¼Œä¹Ÿæ˜¯ç”¨äºè®¾ç½®ç»˜åˆ¶é¢œè‰²çš„ã€‚ã€Œç€è‰²å™¨ã€ä¸æ˜¯ Android
ç‹¬æœ‰çš„ï¼Œå®ƒæ˜¯å›¾å½¢é¢†åŸŸé‡Œä¸€ä¸ªé€šç”¨çš„æ¦‚å¿µï¼Œå®ƒå’Œç›´æ¥è®¾ç½®é¢œè‰²çš„åŒºåˆ«æ˜¯ï¼Œç€è‰²å™¨è®¾ç½®çš„æ˜¯ä¸€ä¸ªé¢œè‰²æ–¹æ¡ˆï¼Œæˆ–è€…è¯´æ˜¯ä¸€å¥—ç€è‰²è§„åˆ™ã€‚å½“è®¾ç½®äº† `Shader`
ä¹‹åï¼Œ`Paint` åœ¨ç»˜åˆ¶å›¾å½¢å’Œæ–‡å­—æ—¶å°±ä¸ä½¿ç”¨ `setColor/ARGB()` è®¾ç½®çš„é¢œè‰²äº†ï¼Œè€Œæ˜¯ä½¿ç”¨ `Shader` çš„æ–¹æ¡ˆä¸­çš„é¢œè‰²ã€‚ åœ¨
Android çš„ç»˜åˆ¶é‡Œä½¿ç”¨ `Shader` ï¼Œå¹¶ä¸ç›´æ¥ç”¨ `Shader` è¿™ä¸ªç±»ï¼Œè€Œæ˜¯ç”¨å®ƒçš„å‡ ä¸ªå­ç±»ã€‚å…·ä½“æ¥è®²æœ‰ `LinearGradient`
`RadialGradient` `SweepGradient` `BitmapShader` `ComposeShader` è¿™ä¹ˆå‡ ä¸ªï¼š #####
1.1.2.1 LinearGradient çº¿æ€§æ¸å˜ è®¾ç½®ä¸¤ä¸ªç‚¹å’Œä¸¤ç§é¢œè‰²ï¼Œä»¥è¿™ä¸¤ä¸ªç‚¹ä½œä¸ºç«¯ç‚¹ï¼Œä½¿ç”¨ä¸¤ç§é¢œè‰²çš„æ¸å˜æ¥ç»˜åˆ¶é¢œè‰²ã€‚å°±åƒè¿™æ ·ï¼š Shader
shader = new LinearGradient(100, 100, 500, 500, Color.parseColor("#E91E63"),
Color.parseColor("#2196F3"), Shader.TileMode.CLAMP); paint.setShader(shader);
... canvas.drawCircle(300, 300, 200, paint);
![](https://ws3.sinaimg.cn/large/52eb2279ly1fig6dq7wudj206l06875e.jpg) > è®¾ç½®äº†
`Shader` ä¹‹åï¼Œç»˜åˆ¶å‡ºäº†æ¸å˜é¢œè‰²çš„åœ†ã€‚ï¼ˆå…¶ä»–å½¢çŠ¶ä»¥åŠæ–‡å­—éƒ½å¯ä»¥è¿™æ ·è®¾ç½®é¢œè‰²ï¼Œæˆ‘åªæ˜¯æ²¡ç»™å‡ºå›¾ã€‚ï¼‰ > > æ³¨æ„ï¼šåœ¨è®¾ç½®äº† `Shader` çš„æƒ…å†µä¸‹ï¼Œ
`Paint.setColor/ARGB()` æ‰€è®¾ç½®çš„é¢œè‰²å°±ä¸å†èµ·ä½œç”¨ã€‚ æ„é€ æ–¹æ³•ï¼š `LinearGradient(float x0, float
y0, float x1, float y1, int color0, int color1, Shader.TileMode tile)` ã€‚ å‚æ•°ï¼š
`x0` `y0` `x1` `y1`ï¼šæ¸å˜çš„ä¸¤ä¸ªç«¯ç‚¹çš„ä½ç½® `color0` `color1` æ˜¯ç«¯ç‚¹çš„é¢œè‰² `tile`ï¼šç«¯ç‚¹èŒƒå›´ä¹‹å¤–çš„ç€è‰²è§„åˆ™ï¼Œç±»å‹æ˜¯
`TileMode`ã€‚`TileMode` ä¸€å…±æœ‰ 3 ä¸ªå€¼å¯é€‰ï¼š `CLAMP`, `MIRROR` å’Œ `REPEAT`ã€‚`CLAMP`
ï¼ˆå¤¹å­æ¨¡å¼ï¼Ÿï¼Ÿï¼Ÿç®—äº†è¿™ä¸ªè¯æˆ‘ä¸ä¼šç¿»ï¼‰ä¼šåœ¨ç«¯ç‚¹ä¹‹å¤–å»¶ç»­ç«¯ç‚¹å¤„çš„é¢œè‰²ï¼›`MIRROR` æ˜¯é•œåƒæ¨¡å¼ï¼›`REPEAT` æ˜¯é‡å¤æ¨¡å¼ã€‚å…·ä½“çš„çœ‹ä¸€ä¸‹ä¾‹å­å°±æ˜ç™½ã€‚
`CLAMP`:
![](https://ws3.sinaimg.cn/large/52eb2279ly1fig6e7vbemj20cj090goh.jpg)
`MIRROR`:
![](https://ws3.sinaimg.cn/large/52eb2279ly1fig6egtxw5j20ck08xjv6.jpg)
`REPEAT`:
![](https://ws3.sinaimg.cn/large/52eb2279ly1fig6em2wabj20ck08xjvo.jpg) #####
1.1.2.2 RadialGradient è¾å°„æ¸å˜ è¾å°„æ¸å˜å¾ˆå¥½ç†è§£ï¼Œå°±æ˜¯ä»ä¸­å¿ƒå‘å‘¨å›´è¾å°„çŠ¶çš„æ¸å˜ã€‚å¤§æ¦‚åƒè¿™æ ·ï¼š Shader shader = new
RadialGradient(300, 300, 200, Color.parseColor("#E91E63"),
Color.parseColor("#2196F3"), Shader.TileMode.CLAMP); paint.setShader(shader);
... canvas.drawCircle(300, 300, 200, paint);
![](https://ws3.sinaimg.cn/large/52eb2279ly1fig6ewf1o5j206d066q4a.jpg) æ„é€ æ–¹æ³•ï¼š
`RadialGradient(float centerX, float centerY, float radius, int centerColor,
int edgeColor, TileMode tileMode)`ã€‚ å‚æ•°ï¼š `centerX` `centerY`ï¼šè¾å°„ä¸­å¿ƒçš„åæ ‡
`radius`ï¼šè¾å°„åŠå¾„ `centerColor`ï¼šè¾å°„ä¸­å¿ƒçš„é¢œè‰² `edgeColor`ï¼šè¾å°„è¾¹ç¼˜çš„é¢œè‰²
`tileMode`ï¼šè¾å°„èŒƒå›´ä¹‹å¤–çš„ç€è‰²æ¨¡å¼ã€‚ `CLAMP`:
![](https://ws3.sinaimg.cn/large/52eb2279ly1fig6f2jz23j20ck08yach.jpg)
`MIRROR`:
![](https://ws3.sinaimg.cn/large/52eb2279ly1fig6fad0cpj20cm09142x.jpg)
`REPEAT`:
![](https://ws3.sinaimg.cn/large/52eb2279ly1fig6fflc56j20cl090tdr.jpg) #####
1.1.2.3 SweepGradient æ‰«ææ¸å˜ åˆæ˜¯ä¸€ä¸ªæ¸å˜ã€‚ã€Œæ‰«ææ¸å˜ã€è¿™ä¸ªç¿»è¯‘æˆ‘ä¹Ÿä¸çŸ¥é“ç²¾ç¡®ä¸ç²¾ç¡®ã€‚å¤§æ¦‚æ˜¯è¿™æ ·ï¼š Shader shader =
new SweepGradient(300, 300, Color.parseColor("#E91E63"),
Color.parseColor("#2196F3")); paint.setShader(shader); ...
canvas.drawCircle(300, 300, 200, paint);
![](https://ws3.sinaimg.cn/large/52eb2279ly1fig6fmbemdj206u061my4.jpg) æ„é€ æ–¹æ³•ï¼š
`SweepGradient(float cx, float cy, int color0, int color1)` å‚æ•°ï¼š `cx` `cy`
ï¼šæ‰«æçš„ä¸­å¿ƒ `color0`ï¼šæ‰«æçš„èµ·å§‹é¢œè‰² `color1`ï¼šæ‰«æçš„ç»ˆæ­¢é¢œè‰² ##### 1.1.2.4 BitmapShader ç”¨ `Bitmap`
æ¥ç€è‰²ï¼ˆç»ˆäºä¸æ˜¯æ¸å˜äº†ï¼‰ã€‚å…¶å®ä¹Ÿå°±æ˜¯ç”¨ `Bitmap` çš„åƒç´ æ¥ä½œä¸ºå›¾å½¢æˆ–æ–‡å­—çš„å¡«å……ã€‚å¤§æ¦‚åƒè¿™æ ·ï¼š Bitmap bitmap =
BitmapFactory.decodeResource(getResources(), R.drawable.batman); Shader shader
= new BitmapShader(bitmap, Shader.TileMode.CLAMP, Shader.TileMode.CLAMP);
paint.setShader(shader); ... canvas.drawCircle(300, 300, 200, paint);
![](https://ws3.sinaimg.cn/large/52eb2279ly1fig6fragq2j20lc089djv.jpg) > å—¯ï¼Œçœ‹ç€è·Ÿ
`Canvas.drawBitmap()` å¥½åƒå•Šï¼Ÿäº‹å®ä¸Šä¹Ÿæ˜¯ä¸€æ ·çš„æ•ˆæœã€‚å¦‚æœä½ æƒ³ç»˜åˆ¶åœ†å½¢çš„ `Bitmap`ï¼Œå°±åˆ«ç”¨ `drawBitmap()`
äº†ï¼Œæ”¹ç”¨ `drawCircle()` \\+ `BitmapShader` å°±å¯ä»¥äº†ï¼ˆå…¶ä»–å½¢çŠ¶åŒç†ï¼‰ã€‚ æ„é€ æ–¹æ³•ï¼š
`BitmapShader(Bitmap bitmap, Shader.TileMode tileX, Shader.TileMode tileY)`
å‚æ•°ï¼š `bitmap`ï¼šç”¨æ¥åšæ¨¡æ¿çš„ `Bitmap` å¯¹è±¡ `tileX`ï¼šæ¨ªå‘çš„ `TileMode` `tileY`ï¼šçºµå‘çš„ `TileMode`ã€‚
`CLAMP`:
![](https://ws3.sinaimg.cn/large/52eb2279ly1fig6g2l2z3j20ks0chq4w.jpg)
`MIRROR`:
![](https://ws3.sinaimg.cn/large/52eb2279ly1fig6g8moalj20kw0cjduk.jpg)
`REPEAT`:
![](https://ws3.sinaimg.cn/large/52eb2279ly1fig6gcxlrfj20kv0ciduo.jpg) #####
1.1.2.5 ComposeShader æ··åˆç€è‰²å™¨ æ‰€è°“æ··åˆï¼Œå°±æ˜¯æŠŠä¸¤ä¸ª `Shader` ä¸€èµ·ä½¿ç”¨ã€‚ // ç¬¬ä¸€ä¸ª Shaderï¼šå¤´åƒçš„ Bitmap
Bitmap bitmap1 = BitmapFactory.decodeResource(getResources(),
R.drawable.batman); Shader shader1 = new BitmapShader(bitmap1,
Shader.TileMode.CLAMP, Shader.TileMode.CLAMP); // ç¬¬äºŒä¸ª Shaderï¼šä»ä¸Šåˆ°ä¸‹çš„çº¿æ€§æ¸å˜ï¼ˆç”±é€æ˜åˆ°é»‘è‰²ï¼‰
Bitmap bitmap2 = BitmapFactory.decodeResource(getResources(),
R.drawable.batman_logo); Shader shader2 = new BitmapShader(bitmap2,
Shader.TileMode.CLAMP, Shader.TileMode.CLAMP); // ComposeShaderï¼šç»“åˆä¸¤ä¸ª Shader
Shader shader = new ComposeShader(shader1, shader2, PorterDuff.Mode.SRC_OVER);
paint.setShader(shader); ... canvas.drawCircle(300, 300, 300, paint); >
æ³¨æ„ï¼šä¸Šé¢è¿™æ®µä»£ç ä¸­æˆ‘ä½¿ç”¨äº†ä¸¤ä¸ª `BitmapShader` æ¥ä½œä¸º `ComposeShader()` çš„å‚æ•°ï¼Œè€Œ `ComposeShader()`
åœ¨ç¡¬ä»¶åŠ é€Ÿä¸‹æ˜¯ä¸æ”¯æŒä¸¤ä¸ªç›¸åŒç±»å‹çš„ `Shader` çš„ï¼Œæ‰€ä»¥è¿™é‡Œä¹Ÿéœ€è¦å…³é—­ç¡¬ä»¶åŠ é€Ÿæ‰èƒ½çœ‹åˆ°æ•ˆæœã€‚
![](https://ws3.sinaimg.cn/large/52eb2279ly1fig6hbeg7gj20qy08cafn.jpg)
æ„é€ æ–¹æ³•ï¼š`ComposeShader(Shader shaderA, Shader shaderB, PorterDuff.Mode mode)` å‚æ•°ï¼š
`shaderA`, `shaderB`ï¼šä¸¤ä¸ªç›¸ç»§ä½¿ç”¨çš„ `Shader` `mode`: ä¸¤ä¸ª `Shader` çš„å åŠ æ¨¡å¼ï¼Œå³ `shaderA` å’Œ
`shaderB` åº”è¯¥æ€æ ·å…±åŒç»˜åˆ¶ã€‚å®ƒçš„ç±»å‹æ˜¯ `PorterDuff.Mode` ã€‚ > PorterDuff.Mode > >
`PorterDuff.Mode` æ˜¯ç”¨æ¥æŒ‡å®šä¸¤ä¸ªå›¾åƒå…±åŒç»˜åˆ¶æ—¶çš„é¢œè‰²ç­–ç•¥çš„ã€‚å®ƒæ˜¯ä¸€ä¸ª enumï¼Œä¸åŒçš„ `Mode`
å¯ä»¥æŒ‡å®šä¸åŒçš„ç­–ç•¥ã€‚ã€Œé¢œè‰²ç­–ç•¥ã€çš„æ„æ€ï¼Œå°±æ˜¯è¯´æŠŠæºå›¾åƒç»˜åˆ¶åˆ°ç›®æ ‡å›¾åƒå¤„æ—¶åº”è¯¥æ€æ ·ç¡®å®šäºŒè€…ç»“åˆåçš„é¢œè‰²ï¼Œè€Œå¯¹äº `ComposeShader(shaderA,
shaderB, mode)` è¿™ä¸ªå…·ä½“çš„æ–¹æ³•ï¼Œå°±æ˜¯æŒ‡åº”è¯¥æ€æ ·æŠŠ `shaderB` ç»˜åˆ¶åœ¨ `shaderA` ä¸Šæ¥å¾—åˆ°ä¸€ä¸ªç»“åˆåçš„ `Shader`ã€‚
> > æ²¡æœ‰å¬è¯´è¿‡ `PorterDuff.Mode`
çš„äººï¼Œçœ‹åˆ°è¿™é‡Œå¾ˆå¯èƒ½ä¾ç„¶ä¼šä¸€å¤´é›¾æ°´ï¼šã€Œä»€ä¹ˆæ€ä¹ˆç»“åˆï¼Ÿå°±â€¦â€¦ä¸¤ä¸ªå›¾åƒä¸€å åŠ ï¼Œç»“åˆå‘—ï¼Ÿè¿˜èƒ½æ€ä¹ˆç»“åˆï¼Ÿã€ä½ è¿˜åˆ«è¯´ï¼Œè¿˜çœŸçš„æ˜¯æœ‰å¾ˆå¤šç§ç­–ç•¥æ¥ç»“åˆã€‚ > >
æœ€ç¬¦åˆç›´è§‰çš„ç»“åˆç­–ç•¥ï¼Œå°±æ˜¯æˆ‘åœ¨ä¸Šé¢è¿™ä¸ªä¾‹å­ä¸­ä½¿ç”¨çš„ `Mode`:
`SRC_OVER`ã€‚å®ƒçš„ç®—æ³•éå¸¸ç›´è§‚ï¼šå°±åƒä¸Šé¢å›¾ä¸­çš„é‚£æ ·ï¼ŒæŠŠæºå›¾åƒç›´æ¥é“ºåœ¨ç›®æ ‡å›¾åƒä¸Šã€‚ä¸è¿‡ï¼Œé™¤äº†è¿™ç§ï¼Œå…¶å®è¿˜æœ‰ä¸€äº›å…¶ä»–çš„ç»“åˆæ–¹å¼ã€‚ä¾‹å¦‚å¦‚æœæˆ‘æŠŠä¸Šé¢ä¾‹å­ä¸­çš„å‚æ•°
`mode` æ”¹ä¸º `PorterDuff.Mode.DST_OUT`ï¼Œå°±ä¼šå˜æˆæŒ–ç©ºæ•ˆæœï¼š > >
![](https://ws3.sinaimg.cn/large/52eb2279ly1fig6hhwy65j20ql09ate9.jpg) > >
è€Œå¦‚æœå†æŠŠ `mode` æ”¹ä¸º `PorterDuff.Mode.DST_IN`ï¼Œå°±ä¼šå˜æˆè’™ç‰ˆæŠ å›¾æ•ˆæœï¼š > >
![](https://ws3.sinaimg.cn/large/52eb2279ly1fig6hxsdpij20qv09p43m.jpg) > >
è¿™ä¸‹æ˜ç™½äº†å§ï¼Ÿ > > å…·ä½“æ¥è¯´ï¼Œ `PorterDuff.Mode` ä¸€å…±æœ‰ 17 ä¸ªï¼Œå¯ä»¥åˆ†ä¸ºä¸¤ç±»ï¼š > > 1. Alpha åˆæˆ (Alpha
Compositing) > 2. æ··åˆ (Blending) > > > ç¬¬ä¸€ç±»ï¼ŒAlpha åˆæˆï¼Œå…¶å®å°±æ˜¯ ã€ŒPorterDuffã€
è¿™ä¸ªè¯æ‰€æŒ‡ä»£çš„ç®—æ³•ã€‚ ã€ŒPorterDuffã€ å¹¶ä¸æ˜¯ä¸€ä¸ªå…·æœ‰å®é™…æ„ä¹‰çš„è¯ç»„ï¼Œè€Œæ˜¯ä¸¤ä¸ªäººçš„åå­—ï¼ˆå‡†ç¡®è®²æ˜¯å§“ï¼‰ã€‚è¿™ä¸¤ä¸ªäººå½“å¹´å…±åŒå‘è¡¨äº†ä¸€ç¯‡è®ºæ–‡ï¼Œæè¿°äº† 12
ç§å°†ä¸¤ä¸ªå›¾åƒå…±åŒç»˜åˆ¶çš„æ“ä½œï¼ˆå³ç®—æ³•ï¼‰ã€‚è€Œè¿™ç¯‡è®ºæ–‡æ‰€è®ºè¿°çš„æ“ä½œï¼Œéƒ½æ˜¯å…³äº Alpha é€šé“ï¼ˆä¹Ÿå°±æ˜¯æˆ‘ä»¬é€šä¿—ç†è§£çš„ã€Œé€æ˜åº¦ã€ï¼‰çš„è®¡ç®—çš„ï¼Œåæ¥äººä»¬å°±æŠŠè¿™ç±»è®¡ç®—ç§°ä¸º
**Alpha åˆæˆ** ( Alpha Compositing ) ã€‚ > > çœ‹ä¸‹æ•ˆæœå§ã€‚æ•ˆæœç›´æ¥ç›— Google
çš„[å®˜æ–¹æ–‡æ¡£](https://developer.android.com/reference/android/graphics/PorterDuff.Mode.html)äº†ã€‚
> > æºå›¾åƒå’Œç›®æ ‡å›¾åƒï¼š > >
![](https://ws3.sinaimg.cn/large/52eb2279ly1fig6ia1twgj20ds07tdgs.jpg) > >
Alpha åˆæˆï¼š > >
![](https://ws3.sinaimg.cn/large/52eb2279ly1fig6im3hhcj20o50zt7bj.jpg) > >
ç¬¬äºŒç±»ï¼Œæ··åˆï¼Œä¹Ÿå°±æ˜¯ Photoshop ç­‰åˆ¶å›¾è½¯ä»¶é‡Œéƒ½æœ‰çš„é‚£äº›æ··åˆæ¨¡å¼ï¼ˆ`multiply` `darken` `lighten`
ä¹‹ç±»çš„ï¼‰ã€‚è¿™ä¸€ç±»æ“ä½œçš„æ˜¯é¢œè‰²æœ¬èº«è€Œä¸æ˜¯ `Alpha` é€šé“ï¼Œå¹¶ä¸å±äº `Alpha` åˆæˆï¼Œæ‰€ä»¥å’Œ Porter ä¸ Duff
è¿™ä¸¤ä¸ªäººä¹Ÿæ²¡ä»€ä¹ˆå…³ç³»ï¼Œä¸è¿‡ä¸ºäº†ä½¿ç”¨çš„æ–¹ä¾¿ï¼Œå®ƒä»¬åŒæ ·ä¹Ÿè¢« Google åŠ è¿›äº† `PorterDuff.Mode` é‡Œã€‚ > > æ•ˆæœä¾ç„¶ç›—
[å®˜æ–¹æ–‡æ¡£](https://developer.android.com/reference/android/graphics/PorterDuff.Mode.html)ã€‚
> > ![](https://ws3.sinaimg.cn/large/52eb2279ly1fig6iw04v0j20ny0hzmzj.jpg) > >
##### ç»“è®º > > ä»æ•ˆæœå›¾å¯ä»¥çœ‹å‡ºï¼ŒAlpha
åˆæˆç±»çš„æ•ˆæœéƒ½æ¯”è¾ƒç›´è§‚ï¼ŒåŸºæœ¬ä¸Šå¯ä»¥ä½¿ç”¨ç®€å•çš„å£å¤´è¡¨è¾¾æ¥æè¿°å®ƒä»¬çš„ç®—æ³•ï¼ˆèµ·ç å¯¹äºä¸é€æ˜çš„æºå›¾åƒå’Œç›®æ ‡å›¾åƒæ¥è¯´æ˜¯å¯ä»¥çš„ï¼‰ï¼Œä¾‹å¦‚ `SRC_OVER`
è¡¨ç¤ºã€ŒäºŒè€…éƒ½ç»˜åˆ¶ï¼Œä½†è¦æºå›¾åƒæ”¾åœ¨ç›®æ ‡å›¾åƒçš„ä¸Šé¢ã€ï¼Œ`DST_IN` è¡¨ç¤ºã€Œåªç»˜åˆ¶ç›®æ ‡å›¾åƒï¼Œå¹¶ä¸”åªç»˜åˆ¶å®ƒå’Œæºå›¾åƒé‡åˆçš„åŒºåŸŸã€ã€‚ > >
è€Œæ··åˆç±»çš„æ•ˆæœå°±ç›¸å¯¹æŠ½è±¡ä¸€äº›ï¼Œåªä»æ•ˆæœå›¾ä¸å¤ªèƒ½çœ‹å¾—å‡ºå®ƒä»¬çš„ç€è‰²ç®—æ³•ï¼Œæ›´çœ‹ä¸å‡ºæ¥å®ƒä»¬æœ‰ä»€ä¹ˆç”¨ã€‚ä¸è¿‡æ²¡å…³ç³»ï¼Œä½ å¦‚æœæ‹¿ç€è¿™äº›åè¯å»é—®ä½ å¸çš„è®¾è®¡å¸ˆï¼Œä»–ä»¬å…«æˆéƒ½èƒ½ç»™ä½ è¯´å‡ºæ¥ä¸ª
123ã€‚ > > æ‰€ä»¥å¯¹äºè¿™äº› `Mode`ï¼Œæ­£ç¡®çš„åšæ³•æ˜¯ï¼š **å¯¹äº Alpha
åˆæˆç±»çš„æ“ä½œï¼ŒæŒæ¡ä»–ä»¬ï¼Œå¹¶åœ¨å®é™…å¼€å‘ä¸­çµæ´»è¿ç”¨ï¼›è€Œå¯¹äºæ··åˆç±»çš„ï¼Œä½ åªè¦æŠŠå®ƒä»¬çš„åå­—è®°ä½å°±å¥½äº†ï¼Œè¿™æ ·å½“æŸä¸€å¤©è®¾è®¡å¸ˆå‘Šè¯‰ä½ ã€Œæˆ‘è¦åšè¿™ç§æ··åˆæ•ˆæœã€çš„æ—¶å€™ï¼Œä½ å¯ä»¥é©¬ä¸ŠçŸ¥é“è‡ªå·±èƒ½ä¸èƒ½åšï¼Œæ€ä¹ˆåšã€‚**
> > å¦å¤–ï¼š`PorterDuff.Mode` å»ºè®®ä½ åŠ¨æ‰‹ç”¨ä¸€ä¸‹è¯•è¯•ï¼Œå¯¹åŠ æ·±ç†è§£æœ‰å¸®åŠ©ã€‚ å¥½äº†ï¼Œè¿™äº›å°±æ˜¯å‡ ä¸ª `Shader` çš„å…·ä½“ä»‹ç»ã€‚ é™¤äº†ä½¿ç”¨
`setColor/ARGB()` å’Œ `setShader()` æ¥è®¾ç½®åŸºæœ¬é¢œè‰²ï¼Œ `Paint` è¿˜å¯ä»¥æ¥è®¾ç½®
`ColorFilter`ï¼Œæ¥å¯¹é¢œè‰²è¿›è¡Œç¬¬äºŒå±‚å¤„ç†ã€‚ ### 1.2 setColorFilter(ColorFilter colorFilter)
`ColorFilter` è¿™ä¸ªç±»ï¼Œå®ƒçš„åå­—å·²ç»è¶³å¤Ÿè§£é‡Šå®ƒçš„ä½œç”¨ï¼šä¸ºç»˜åˆ¶è®¾ç½®é¢œè‰²è¿‡æ»¤ã€‚é¢œè‰²è¿‡æ»¤çš„æ„æ€ï¼Œå°±æ˜¯ä¸ºç»˜åˆ¶çš„å†…å®¹è®¾ç½®ä¸€ä¸ªç»Ÿä¸€çš„è¿‡æ»¤ç­–ç•¥ï¼Œç„¶å
`Canvas.drawXXX()` æ–¹æ³•ä¼šå¯¹æ¯ä¸ªåƒç´ éƒ½è¿›è¡Œè¿‡æ»¤åå†ç»˜åˆ¶å‡ºæ¥ã€‚ä¸¾å‡ ä¸ªç°å®ä¸­æ¯”è¾ƒå¸¸è§çš„é¢œè‰²è¿‡æ»¤çš„ä¾‹å­ï¼š * æœ‰è‰²å…‰ç…§å°„ï¼š
![w400](https://ws3.sinaimg.cn/large/52eb2279ly1fig6j51ronj20rs0kv1kx.jpg) *
æœ‰è‰²ç»ç’ƒé€è§†ï¼š
![w400](https://ws3.sinaimg.cn/large/52eb2279ly1fig6jizpvnj20iw0db4ey.jpg) *
èƒ¶å·ï¼š ![](https://ws3.sinaimg.cn/large/52eb2279ly1fig6jv8idsj206404v40i.jpg) åœ¨
`Paint` é‡Œè®¾ç½® `ColorFilter` ï¼Œä½¿ç”¨çš„æ˜¯ `Paint.setColorFilter(ColorFilter filter)` æ–¹æ³•ã€‚
`ColorFilter` å¹¶ä¸ç›´æ¥ä½¿ç”¨ï¼Œè€Œæ˜¯ä½¿ç”¨å®ƒçš„å­ç±»ã€‚å®ƒå…±æœ‰ä¸‰ä¸ªå­ç±»ï¼š`LightingColorFilter`
`PorterDuffColorFilter` å’Œ `ColorMatrixColorFilter`ã€‚ #### 1.2.1
LightingColorFilter è¿™ä¸ª `LightingColorFilter` æ˜¯ç”¨æ¥æ¨¡æ‹Ÿç®€å•çš„å…‰ç…§æ•ˆæœçš„ã€‚
`LightingColorFilter` çš„æ„é€ æ–¹æ³•æ˜¯ `LightingColorFilter(int mul, int add)` ï¼Œå‚æ•°é‡Œçš„
`mul` å’Œ `add` éƒ½æ˜¯å’Œé¢œè‰²å€¼æ ¼å¼ç›¸åŒçš„ int å€¼ï¼Œå…¶ä¸­ `mul` ç”¨æ¥å’Œç›®æ ‡åƒç´ ç›¸ä¹˜ï¼Œ`add` ç”¨æ¥å’Œç›®æ ‡åƒç´ ç›¸åŠ ï¼š R' = R *
mul.R / 0xff + add.R G' = G * mul.G / 0xff + add.G B' = B * mul.B / 0xff +
add.B ä¸€ä¸ªã€Œä¿æŒåŸæ ·ã€çš„ã€ŒåŸºæœ¬ `LightingColorFilter` ã€ï¼Œ`mul` ä¸º `0xffffff`ï¼Œ`add` ä¸º
`0x000000`ï¼ˆä¹Ÿå°±æ˜¯0ï¼‰ï¼Œé‚£ä¹ˆå¯¹äºä¸€ä¸ªåƒç´ ï¼Œå®ƒçš„è®¡ç®—è¿‡ç¨‹å°±æ˜¯ï¼š R' = R * 0xff / 0xff + 0x0 = R // R' = R
G' = G * 0xff / 0xff + 0x0 = G // G' = G B' = B * 0xff / 0xff + 0x0 = B // B'
= B åŸºäºè¿™ä¸ªã€ŒåŸºæœ¬ `LightingColorFilter` ã€ï¼Œä½ å°±å¯ä»¥ä¿®æ”¹ä¸€ä¸‹åšå‡ºå…¶ä»–çš„
filterã€‚æ¯”å¦‚ï¼Œå¦‚æœä½ æƒ³å»æ‰åŸåƒç´ ä¸­çš„çº¢è‰²ï¼Œå¯ä»¥æŠŠå®ƒçš„ `mul` æ”¹ä¸º `0x00ffff` ï¼ˆçº¢è‰²éƒ¨åˆ†ä¸º 0 ï¼‰ ï¼Œé‚£ä¹ˆå®ƒçš„è®¡ç®—è¿‡ç¨‹å°±æ˜¯ï¼š R' =
R * 0x0 / 0xff + 0x0 = 0 // çº¢è‰²è¢«ç§»é™¤ G' = G * 0xff / 0xff + 0x0 = G B' = B * 0xff
/ 0xff + 0x0 = B å…·ä½“æ•ˆæœæ˜¯è¿™æ ·çš„ï¼š ColorFilter lightingColorFilter = new
LightingColorFilter(0x00ffff, 0x000000);
paint.setColorFilter(lightingColorFilter);
![](https://ws3.sinaimg.cn/large/52eb2279ly1fig6k1n8aij209104faay.jpg) >
è¡¨æƒ…å¿½ç„¶å˜å¾—é˜´éƒäº† æˆ–è€…ï¼Œå¦‚æœä½ æƒ³è®©å®ƒçš„ç»¿è‰²æ›´äº®ä¸€äº›ï¼Œå°±å¯ä»¥æŠŠå®ƒçš„ `add` æ”¹ä¸º `0x003000` ï¼ˆç»¿è‰²éƒ¨åˆ†ä¸º 0x30
ï¼‰ï¼Œé‚£ä¹ˆå®ƒçš„è®¡ç®—è¿‡ç¨‹å°±æ˜¯ï¼š R' = R * 0xff / 0xff + 0x0 = R G' = G * 0xff / 0xff + 0x30 = G +
0x30 // ç»¿è‰²è¢«åŠ å¼º B' = B * 0xff / 0xff + 0x0 = B æ•ˆæœæ˜¯è¿™æ ·ï¼š ColorFilter
lightingColorFilter = new LightingColorFilter(0xffffff, 0x003000);
paint.setColorFilter(lightingColorFilter);
![](https://ws3.sinaimg.cn/large/52eb2279ly1fig6k91tiyj209f04dmy3.jpg) >
è¿™æ ·çš„è¡¨æƒ…æ‰é˜³å…‰ è‡³äºæ€ä¹ˆä¿®æ”¹å‚æ•°æ¥æ¨¡æ‹Ÿä½ æƒ³è¦çš„æŸç§å…·ä½“å…‰ç…§æ•ˆæœï¼Œä½ å°±åˆ«é—®æˆ‘äº†ï¼Œè¿˜æ˜¯è·Ÿä½ å¸è®¾è®¡å¸ˆè®¨è®ºå§ï¼Œè¿™ä¸ªæˆ‘ä¸ä¸“ä¸šâ€¦â€¦ #### 1.2.2
PorterDuffColorFilter è¿™ä¸ª `PorterDuffColorFilter` çš„ä½œç”¨æ˜¯ä½¿ç”¨ä¸€ä¸ªæŒ‡å®šçš„é¢œè‰²å’Œä¸€ç§æŒ‡å®šçš„
`PorterDuff.Mode` æ¥ä¸ç»˜åˆ¶å¯¹è±¡è¿›è¡Œåˆæˆã€‚å®ƒçš„æ„é€ æ–¹æ³•æ˜¯ `PorterDuffColorFilter(int color,
PorterDuff.Mode mode)` å…¶ä¸­çš„ `color` å‚æ•°æ˜¯æŒ‡å®šçš„é¢œè‰²ï¼Œ `mode` å‚æ•°æ˜¯æŒ‡å®šçš„ `Mode`ã€‚åŒæ ·ä¹Ÿæ˜¯
`PorterDuff.Mode` ï¼Œä¸è¿‡å’Œ `ComposeShader` ä¸åŒçš„æ˜¯ï¼Œ`PorterDuffColorFilter` ä½œä¸ºä¸€ä¸ª
`ColorFilter`ï¼Œåªèƒ½æŒ‡å®šä¸€ç§é¢œè‰²ä½œä¸ºæºï¼Œè€Œä¸æ˜¯ä¸€ä¸ª `Bitmap`ã€‚ `PorterDuff.Mode` å‰é¢å·²ç»è®²è¿‡äº†ï¼Œè€Œ
`PorterDuffColorFilter` æœ¬èº«çš„ä½¿ç”¨æ˜¯éå¸¸ç®€å•çš„ï¼Œæ‰€ä»¥ä¸å†å±•å¼€è®²ã€‚ #### 1.2.3 ColorMatrixColorFilter
è¿™ä¸ªå°±å‰å®³äº†ã€‚`ColorMatrixColorFilter` ä½¿ç”¨ä¸€ä¸ª `ColorMatrix` æ¥å¯¹é¢œè‰²è¿›è¡Œå¤„ç†ã€‚ `ColorMatrix`
è¿™ä¸ªç±»ï¼Œå†…éƒ¨æ˜¯ä¸€ä¸ª 4x5 çš„çŸ©é˜µï¼š [ a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p, q, r, s,
t ] é€šè¿‡è®¡ç®—ï¼Œ `ColorMatrix` å¯ä»¥æŠŠè¦ç»˜åˆ¶çš„åƒç´ è¿›è¡Œè½¬æ¢ã€‚å¯¹äºé¢œè‰² [R, G, B, A] ï¼Œè½¬æ¢ç®—æ³•æ˜¯è¿™æ ·çš„ï¼š Râ€™ = a*R +
b*G + c*B + d*A + e; Gâ€™ = f*R + g*G + h*B + i*A + j; Bâ€™ = k*R + l*G + m*B +
n*A + o; Aâ€™ = p*R + q*G + r*B + s*A + t; `ColorMatrix` æœ‰ä¸€äº›è‡ªå¸¦çš„æ–¹æ³•å¯ä»¥åšç®€å•çš„è½¬æ¢ï¼Œä¾‹å¦‚å¯ä»¥ä½¿ç”¨
`setSaturation(float sat)`
æ¥è®¾ç½®é¥±å’Œåº¦ï¼›å¦å¤–ä½ ä¹Ÿå¯ä»¥è‡ªå·±å»è®¾ç½®å®ƒçš„æ¯ä¸€ä¸ªå…ƒç´ æ¥å¯¹è½¬æ¢æ•ˆæœåšç²¾ç»†è°ƒæ•´ã€‚å…·ä½“æ€æ ·è®¾ç½®ä¼šæœ‰æ€æ ·çš„æ•ˆæœï¼Œæˆ‘å°±ä¸è®²äº†ï¼ˆå…¶å®æ˜¯æˆ‘ä¹Ÿä¸å¤ªä¼šğŸ˜…ï¼‰ã€‚å¦‚æœä½ æœ‰éœ€æ±‚ï¼Œå¯ä»¥è¯•ä¸€ä¸‹ç¨‹å¤§æ²»åŒå­¦åšçš„è¿™ä¸ªåº“ï¼š[StyleImageView](https://github.com/chengdazhi/StyleImageView)
![](https://ws1.sinaimg.cn/large/006tNc79ly1fig6vhi48zg309c0fzqv7.gif) ä»¥ä¸Šï¼Œå°±æ˜¯
`Paint` å¯¹é¢œè‰²çš„ç¬¬äºŒå±‚å¤„ç†ï¼šé€šè¿‡ `setColorFilter(colorFilter)` æ¥åŠ å·¥é¢œè‰²ã€‚ é™¤äº†åŸºæœ¬é¢œè‰²çš„è®¾ç½®ï¼ˆ
`setColor/ARGB()`, `setShader()` ï¼‰ä»¥åŠåŸºäºåŸå§‹é¢œè‰²çš„è¿‡æ»¤ï¼ˆ `setColorFilter()` ï¼‰ä¹‹å¤–ï¼Œ`Paint`
æœ€åä¸€å±‚å¤„ç†é¢œè‰²çš„æ–¹æ³•æ˜¯ `setXfermode(Xfermode xfermode)` ï¼Œå®ƒå¤„ç†çš„æ˜¯ã€Œå½“é¢œè‰²é‡ä¸Š Viewã€çš„é—®é¢˜ã€‚ ### 1.3
setXfermode(Xfermode xfermode) "Xfermode" å…¶å®å°±æ˜¯ "Transfer mode"ï¼Œç”¨ "X" æ¥ä»£æ›¿
"Trans" æ˜¯ä¸€äº›ç¾å›½äººå–œæ¬¢ç”¨çš„ç®€å†™æ–¹å¼ã€‚ä¸¥è°¨åœ°è®²ï¼Œ `Xfermode` æŒ‡çš„æ˜¯ä½ è¦ç»˜åˆ¶çš„å†…å®¹å’Œ `Canvas`
çš„ç›®æ ‡ä½ç½®çš„å†…å®¹åº”è¯¥æ€æ ·ç»“åˆè®¡ç®—å‡ºæœ€ç»ˆçš„é¢œè‰²ã€‚ä½†é€šä¿—åœ°è¯´ï¼Œå…¶å®å°±æ˜¯è¦ä½ ä»¥ç»˜åˆ¶çš„å†…å®¹ä½œä¸ºæºå›¾åƒï¼Œä»¥ View ä¸­å·²æœ‰çš„å†…å®¹ä½œä¸ºç›®æ ‡å›¾åƒï¼Œé€‰å–ä¸€ä¸ª
`PorterDuff.Mode` ä½œä¸ºç»˜åˆ¶å†…å®¹çš„é¢œè‰²å¤„ç†æ–¹æ¡ˆã€‚å°±åƒè¿™æ ·ï¼š Xfermode xfermode = new
PorterDuffXfermode(PorterDuff.Mode.DST_IN); ... canvas.drawBitmap(rectBitmap,
0, 0, paint); // ç”»æ–¹ paint.setXfermode(xfermode); // è®¾ç½® Xfermode
canvas.drawBitmap(circleBitmap, 0, 0, paint); // ç”»åœ† paint.setXfermode(null);
// ç”¨å®ŒåŠæ—¶æ¸…é™¤ Xfermode
![](https://ws1.sinaimg.cn/large/006tNc79ly1fig6x8dhk6j30nl0pswff.jpg)
![](https://ws4.sinaimg.cn/large/006tNc79ly1fig70910n6g30eg0b4x6p.gif) åˆæ˜¯
`PorterDuff.Mode` ã€‚ `PorterDuff.Mode` åœ¨ `Paint` ä¸€å…±æœ‰ä¸‰å¤„ API ï¼Œå®ƒä»¬çš„å·¥ä½œåŸç†éƒ½ä¸€æ ·ï¼Œåªæ˜¯ç”¨é€”ä¸åŒï¼š
![](https://ws2.sinaimg.cn/large/006tNc79ly1fig70nh3gpj30fs04uwez.jpg)
å¦å¤–ï¼Œä»ä¸Šé¢çš„ç¤ºä¾‹ä»£ç å¯ä»¥çœ‹å‡ºï¼Œåˆ›å»º `Xfermode` çš„æ—¶å€™å…¶å®æ˜¯åˆ›å»ºçš„å®ƒçš„å­ç±»
`PorterDuffXfermode`ã€‚è€Œäº‹å®ä¸Šï¼Œ`Xfermode` ä¹Ÿåªæœ‰è¿™ä¸€ä¸ªå­ç±»ã€‚æ‰€ä»¥åœ¨è®¾ç½® `Xfermode` çš„æ—¶å€™ä¸ç”¨å¤šæƒ³ï¼Œç›´æ¥ç”¨
`PorterDuffXfermode` å§ã€‚ > ã€Œåªæœ‰ä¸€ä¸ªå­ç±»ï¼Ÿï¼Ÿï¼Ÿä»€ä¹ˆè®¾è®¡ï¼Ÿã€ > >
![](https://ws2.sinaimg.cn/large/006tNc79ly1fig71bvcguj305t05wq35.jpg) > >
å…¶å®åœ¨æ›´æ—©çš„ Android ç‰ˆæœ¬ä¸­ï¼Œ`Xfermode` è¿˜æœ‰åˆ«çš„å­ç±»ï¼Œä½†åˆ«çš„å­ç±»ç°åœ¨å·²ç» `deprecated` äº†ï¼Œå¦‚ä»Šåªå‰©ä¸‹äº†
`PorterDuffXfermode`ã€‚æ‰€ä»¥ç›®å‰å®ƒçš„ä½¿ç”¨çœ‹èµ·æ¥å¥½åƒæœ‰ç‚¹å•°å—¦ï¼Œä½†å…¶å®æ˜¯ç”±äºå†å²é—ç•™é—®é¢˜ã€‚ #### Xfermode æ³¨æ„äº‹é¡¹
`Xfermode` ä½¿ç”¨å¾ˆç®€å•ï¼Œä¸è¿‡æœ‰ä¸¤ç‚¹éœ€è¦æ³¨æ„ï¼š ##### 1\\. ä½¿ç”¨ç¦»å±ç¼“å†²ï¼ˆOff-screen Bufferï¼‰
å®è´¨ä¸Šï¼Œä¸Šé¢è¿™æ®µä¾‹å­ä»£ç ï¼Œå¦‚æœç›´æ¥æ‰§è¡Œçš„è¯æ˜¯ä¸ä¼šç»˜åˆ¶å‡ºå›¾ä¸­æ•ˆæœçš„ï¼Œç¨‹åºçš„ç»˜åˆ¶ä¹Ÿä¸ä¼šåƒä¸Šé¢çš„åŠ¨ç”»é‚£æ ·æ‰§è¡Œï¼Œè€Œæ˜¯ä¼šåƒè¿™æ ·ï¼š
![](https://ws2.sinaimg.cn/large/006tNc79ly1fig71o7qskj30nl0pl0tx.jpg) >
ä¸ºä»€ä¹ˆä¼šè¿™æ ·ï¼Ÿ æŒ‰ç…§é€»è¾‘æˆ‘ä»¬ä¼šè®¤ä¸ºï¼Œåœ¨ç¬¬äºŒæ­¥ç”»åœ†çš„æ—¶å€™ï¼Œè·Ÿå®ƒå…±åŒè®¡ç®—çš„æ˜¯ç¬¬ä¸€æ­¥ç»˜åˆ¶çš„æ–¹å½¢ã€‚ä½†å®é™…ä¸Šï¼Œå´æ˜¯æ•´ä¸ª `View`
çš„æ˜¾ç¤ºåŒºåŸŸéƒ½åœ¨ç”»åœ†çš„æ—¶å€™å‚ä¸è®¡ç®—ï¼Œå¹¶ä¸” `View`
è‡ªèº«çš„åº•è‰²å¹¶ä¸æ˜¯é»˜è®¤çš„é€æ˜è‰²ï¼Œè€Œä¸”æ˜¯éµå¾ªä¸€ç§è¿·ä¹‹é€»è¾‘ï¼Œå¯¼è‡´ä¸ä»…ç»˜åˆ¶çš„æ˜¯æ•´ä¸ªåœ†çš„èŒƒå›´ï¼Œè€Œä¸”åœ¨èŒƒå›´ä¹‹å¤–éƒ½å˜æˆäº†é»‘è‰²ã€‚å°±åƒè¿™æ ·ï¼š
![](https://ws1.sinaimg.cn/large/006tNc79ly1fig721mjemg30eg0b4u0x.gif) >
è¿™â€¦â€¦é‚£å¯å¦‚ä½•æ˜¯å¥½ï¼Ÿ è¦æƒ³ä½¿ç”¨ `setXfermode()` æ­£å¸¸ç»˜åˆ¶ï¼Œå¿…é¡»ä½¿ç”¨ç¦»å±ç¼“å­˜ (Off-screen Buffer)
æŠŠå†…å®¹ç»˜åˆ¶åœ¨é¢å¤–çš„å±‚ä¸Šï¼Œå†æŠŠç»˜åˆ¶å¥½çš„å†…å®¹è´´å› View ä¸­ã€‚ä¹Ÿå°±æ˜¯è¿™æ ·ï¼š
![](https://ws4.sinaimg.cn/large/006tNc79ly1fig72kvygag30eg0b4npd.gif)
é€šè¿‡ä½¿ç”¨ç¦»å±ç¼“å†²ï¼ŒæŠŠè¦ç»˜åˆ¶çš„å†…å®¹å•ç‹¬ç»˜åˆ¶åœ¨ç¼“å†²å±‚ï¼Œ `Xfermode` çš„ä½¿ç”¨å°±ä¸ä¼šå‡ºç°å¥‡æ€ªçš„ç»“æœäº†ã€‚ä½¿ç”¨ç¦»å±ç¼“å†²æœ‰ä¸¤ç§æ–¹å¼ï¼š *
`Canvas.saveLayer()` `saveLayer()`
å¯ä»¥åšçŸ­æ—¶çš„ç¦»å±ç¼“å†²ã€‚ä½¿ç”¨æ–¹æ³•å¾ˆç®€å•ï¼Œåœ¨ç»˜åˆ¶ä»£ç çš„å‰åå„åŠ ä¸€è¡Œä»£ç ï¼Œåœ¨ç»˜åˆ¶ä¹‹å‰ä¿å­˜ï¼Œç»˜åˆ¶ä¹‹åæ¢å¤ï¼š int saved =
canvas.saveLayer(null, null, Canvas.ALL_SAVE_FLAG);
canvas.drawBitmap(rectBitmap, 0, 0, paint); // ç”»æ–¹ paint.setXfermode(xfermode);
// è®¾ç½® Xfermode canvas.drawBitmap(circleBitmap, 0, 0, paint); // ç”»åœ†
paint.setXfermode(null); // ç”¨å®ŒåŠæ—¶æ¸…é™¤ Xfermode canvas.restoreToCount(saved); *
`View.setLayerType()` `View.setLayerType()` æ˜¯ç›´æ¥æŠŠæ•´ä¸ª `View` éƒ½ç»˜åˆ¶åœ¨ç¦»å±ç¼“å†²ä¸­ã€‚
`setLayerType(LAYER_TYPE_HARDWARE)` æ˜¯ä½¿ç”¨ GPU æ¥ç¼“å†²ï¼Œ
`setLayerType(LAYER_TYPE_SOFTWARE)` æ˜¯ç›´æ¥ç›´æ¥ç”¨ä¸€ä¸ª `Bitmap` æ¥ç¼“å†²ã€‚ > å…³äº
`Canvas.saveLayer()` å’Œ `View.setLayerType()` ï¼Œè¿™é‡Œå°±ä¸ç»†è®²å®ƒä»¬çš„æ„ä¹‰å’ŒåŸç†äº†ï¼Œåé¢ä¹Ÿè®¸æˆ‘ä¼šä¸“é—¨ç”¨ä¸€æœŸæ¥è®²å®ƒä»¬ã€‚
å¦‚æœæ²¡æœ‰ç‰¹æ®Šéœ€æ±‚ï¼Œå¯ä»¥é€‰ç”¨ç¬¬ä¸€ç§æ–¹æ³• `Canvas.saveLayer()`
æ¥è®¾ç½®ç¦»å±ç¼“å†²ï¼Œä»¥æ­¤æ¥è·å¾—æ›´é«˜çš„æ€§èƒ½ã€‚æ›´å¤šå…³äºç¦»å±ç¼“å†²çš„ä¿¡æ¯ï¼Œå¯ä»¥çœ‹[å®˜æ–¹æ–‡æ¡£](https://developer.android.com/guide/topics/graphics
/hardware-accel.html)ä¸­å¯¹äºç¡¬ä»¶åŠ é€Ÿçš„ä»‹ç»ã€‚ ##### 2\\. æ§åˆ¶å¥½é€æ˜åŒºåŸŸ ä½¿ç”¨ Xfermode
æ¥ç»˜åˆ¶çš„å†…å®¹ï¼Œé™¤äº†æ³¨æ„ä½¿ç”¨ç¦»å±ç¼“å†²ï¼Œè¿˜åº”è¯¥æ³¨æ„æ§åˆ¶å®ƒçš„é€æ˜åŒºåŸŸä¸è¦å¤ªå°ï¼Œè¦è®©å®ƒè¶³å¤Ÿè¦†ç›–åˆ°è¦å’Œå®ƒç»“åˆç»˜åˆ¶çš„å†…å®¹ï¼Œå¦åˆ™å¾—åˆ°çš„ç»“æœå¾ˆå¯èƒ½ä¸æ˜¯ä½ æƒ³è¦çš„ã€‚æˆ‘ç”¨å›¾ç‰‡æ¥å…·ä½“è¯´æ˜ä¸€ä¸‹ï¼š
![](https://ws1.sinaimg.cn/large/006tNc79ly1fig73037soj30sj0x3myt.jpg) >
å¦‚å›¾æ‰€ç¤ºï¼Œç”±äºé€æ˜åŒºåŸŸè¿‡å°è€Œè¦†ç›–ä¸åˆ°çš„åœ°æ–¹ï¼Œå°†ä¸ä¼šå—åˆ° Xfermode çš„å½±å“ã€‚ å¥½ï¼Œåˆ°æ­¤ä¸ºæ­¢ï¼Œå‰é¢è®²çš„å°±æ˜¯ `Paint` çš„ç¬¬ä¸€ç±»
APIâ€”â€”å…³äºé¢œè‰²çš„ä¸‰å±‚è®¾ç½®ï¼šç›´æ¥è®¾ç½®é¢œè‰²çš„ API ç”¨æ¥ç»™å›¾å½¢å’Œæ–‡å­—è®¾ç½®é¢œè‰²ï¼› `setColorFilter()` ç”¨æ¥åŸºäºé¢œè‰²è¿›è¡Œè¿‡æ»¤å¤„ç†ï¼›
`setXfermode()` ç”¨æ¥å¤„ç†æºå›¾åƒå’Œ `View` å·²æœ‰å†…å®¹çš„å…³ç³»ã€‚ å†è´´ä¸€æ¬¡æœ¬ç« å¼€å§‹å¤„çš„å›¾ä½œä¸ºå›é¡¾ï¼š
![](https://ws2.sinaimg.cn/large/006tNc79ly1fig738su5oj30j909ymy2.jpg) ## 2 æ•ˆæœ
æ•ˆæœç±»çš„ API ï¼ŒæŒ‡çš„å°±æ˜¯æŠ—é”¯é½¿ã€å¡«å……/è½®å»“ã€çº¿æ¡å®½åº¦ç­‰ç­‰è¿™äº›ã€‚ ### 2.1 setAntiAlias (boolean aa) è®¾ç½®æŠ—é”¯é½¿
æŠ—é”¯é½¿åœ¨ä¸Šä¸€èŠ‚å·²ç»è®²è¿‡äº†ï¼Œè¯ä¸å¤šè¯´ï¼Œç›´æ¥ä¸Šå›¾ï¼š
![](https://ws1.sinaimg.cn/large/006tNc79ly1fig73fpp5aj30ks0bqt9f.jpg)
æŠ—é”¯é½¿é»˜è®¤æ˜¯å…³é—­çš„ï¼Œå¦‚æœéœ€è¦æŠ—é”¯é½¿ï¼Œéœ€è¦æ˜¾å¼åœ°æ‰“å¼€ã€‚å¦å¤–ï¼Œé™¤äº† `setAntiAlias(aa)` æ–¹æ³•ï¼Œæ‰“å¼€æŠ—é”¯é½¿è¿˜æœ‰ä¸€ä¸ªæ›´æ–¹ä¾¿çš„æ–¹å¼ï¼šæ„é€ æ–¹æ³•ã€‚åˆ›å»º
`Paint` å¯¹è±¡çš„æ—¶å€™ï¼Œæ„é€ æ–¹æ³•çš„å‚æ•°é‡ŒåŠ ä¸€ä¸ª `ANTI_ALIAS_FLAG` çš„ flagï¼Œå°±å¯ä»¥åœ¨åˆå§‹åŒ–çš„æ—¶å€™å°±å¼€å¯æŠ—é”¯é½¿ã€‚ Paint
paint = new Paint(Paint.ANTI_ALIAS_FLAG); ### 2.2 setStyle(Paint.Style style)
`setStyle(style)` ä¹Ÿåœ¨ä¸Šä¸€èŠ‚è®²è¿‡äº†ï¼Œç”¨æ¥è®¾ç½®å›¾å½¢æ˜¯çº¿æ¡é£æ ¼è¿˜æ˜¯å¡«å……é£æ ¼çš„ï¼ˆä¹Ÿå¯ä»¥äºŒè€…å¹¶ç”¨ï¼‰ï¼š
paint.setStyle(Paint.Style.FILL); // FILL æ¨¡å¼ï¼Œå¡«å…… canvas.drawCircle(300, 300,
200, paint);
![](https://ws3.sinaimg.cn/large/006tNc79ly1fig73rw5yoj303w03s0sm.jpg)
paint.setStyle(Paint.Style.STROKE); // STROKE æ¨¡å¼ï¼Œç”»çº¿ canvas.drawCircle(300,
300, 200, paint);
![](https://ws2.sinaimg.cn/large/006tNc79ly1fig7lnxj6oj303z03ta9y.jpg)
paint.setStyle(Paint.Style.FILL_AND_STROKE); // FILL_AND_STROKE æ¨¡å¼ï¼Œå¡«å…… + ç”»çº¿
canvas.drawCircle(300, 300, 200, paint);
![](https://ws3.sinaimg.cn/large/006tNc79ly1fig7litstsj303w03s0sm.jpg) `FILL`
æ¨¡å¼æ˜¯é»˜è®¤æ¨¡å¼ï¼Œæ‰€ä»¥å¦‚æœä¹‹å‰æ²¡æœ‰è®¾ç½®è¿‡å…¶ä»–çš„ `Style`ï¼Œå¯ä»¥ä¸ç”¨ `setStyle(Paint.Style.FILL)` è¿™å¥ã€‚ ### 2.3
çº¿æ¡å½¢çŠ¶ è®¾ç½®çº¿æ¡å½¢çŠ¶çš„ä¸€å…±æœ‰ 4 ä¸ªæ–¹æ³•ï¼š`setStrokeWidth(float width)`, `setStrokeCap(Paint.Cap
cap)`, `setStrokeJoin(Paint.Join join)`, `setStrokeMiter(float miter)` ã€‚ ####
2.3.1 setStrokeWidth(float width) è®¾ç½®çº¿æ¡å®½åº¦ã€‚å•ä½ä¸ºåƒç´ ï¼Œé»˜è®¤å€¼æ˜¯ 0ã€‚
paint.setStyle(Paint.Style.STROKE); paint.setStrokeWidth(1);
canvas.drawCircle(150, 125, 100, paint); paint.setStrokeWidth(5);
canvas.drawCircle(400, 125, 100, paint); paint.setStrokeWidth(40);
canvas.drawCircle(650, 125, 100, paint);
![](https://ws4.sinaimg.cn/large/006tNc79ly1fig7407tp7j30lj07ljrr.jpg) > çº¿æ¡å®½åº¦
0 å’Œ 1 çš„åŒºåˆ« > > é»˜è®¤æƒ…å†µä¸‹ï¼Œçº¿æ¡å®½åº¦ä¸º 0ï¼Œä½†ä½ ä¼šå‘ç°ï¼Œè¿™ä¸ªæ—¶å€™å®ƒä¾ç„¶èƒ½å¤Ÿç”»å‡ºçº¿ï¼Œçº¿æ¡çš„å®½åº¦ä¸º 1 åƒç´ ã€‚é‚£ä¹ˆå®ƒå’Œçº¿æ¡å®½åº¦ä¸º 1 æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿ
> > å…¶å®è¿™ä¸ªå’Œåé¢è¦è®²çš„ä¸€ä¸ªã€Œå‡ ä½•å˜æ¢ã€æœ‰å…³ï¼šä½ å¯ä»¥ä¸º `Canvas` è®¾ç½® `Matrix`
æ¥å®ç°å‡ ä½•å˜æ¢ï¼ˆå¦‚æ”¾å¤§ã€ç¼©å°ã€å¹³ç§»ã€æ—‹è½¬ï¼‰ï¼Œåœ¨å‡ ä½•å˜æ¢ä¹‹å `Canvas` ç»˜åˆ¶çš„å†…å®¹å°±ä¼šå‘ç”Ÿç›¸åº”å˜åŒ–ï¼ŒåŒ…æ‹¬çº¿æ¡ä¹Ÿä¼šåŠ ç²—ï¼Œä¾‹å¦‚ 2 åƒç´ å®½åº¦çš„çº¿æ¡åœ¨
`Canvas` æ”¾å¤§ 2 å€åä¼šè¢«ä»¥ 4 åƒç´ å®½åº¦æ¥ç»˜åˆ¶ã€‚è€Œå½“çº¿æ¡å®½åº¦è¢«è®¾ç½®ä¸º 0 æ—¶ï¼Œå®ƒçš„å®½åº¦å°±è¢«å›ºå®šä¸º 1 åƒç´ ï¼Œå°±ç®— `Canvas`
é€šè¿‡å‡ ä½•å˜æ¢è¢«æ”¾å¤§ï¼Œå®ƒä¹Ÿä¾ç„¶ä¼šè¢«ä»¥ 1 åƒç´ å®½åº¦æ¥ç»˜åˆ¶ã€‚Google åœ¨æ–‡æ¡£ä¸­æŠŠçº¿æ¡å®½åº¦ä¸º 0 æ—¶ç§°ä½œã€Œhairline modeï¼ˆå‘é™…çº¿æ¨¡å¼ï¼‰ã€ã€‚
#### 2.3.2 setStrokeCap(Paint.Cap cap) è®¾ç½®çº¿å¤´çš„å½¢çŠ¶ã€‚çº¿å¤´å½¢çŠ¶æœ‰ä¸‰ç§ï¼š`BUTT` å¹³å¤´ã€`ROUND`
åœ†å¤´ã€`SQUARE` æ–¹å¤´ã€‚é»˜è®¤ä¸º `BUTT`ã€‚ >
æ”¾å‡ºã€Œå¹³å¤´ã€ã€Œåœ†å¤´ã€ã€Œæ–¹å¤´ã€è¿™ç§ç¿»è¯‘æˆ‘å§‹ç»ˆæœ‰ç‚¹çº ç»“ï¼šæ—¢è§‰å¾—è‡ªå·±ç¿»è¯‘å¾—ç®€æ´æ¸…æ™°å°½æ˜¾æœºæ™ºï¼ŒåŒæ—¶åˆæ‹…å¿ƒç”¨è¯ä¼šä¸ä¼šæœ‰ç‚¹å¤ªè¿‡é€šä¿—ï¼Œè®©äººè§‰å¾—æˆ‘ä¸å¤Ÿé«˜è´µå†·è‰³ï¼Ÿ
å½“çº¿æ¡çš„å®½åº¦æ˜¯ 1 åƒç´ æ—¶ï¼Œè¿™ä¸‰ç§çº¿å¤´çš„è¡¨ç°æ˜¯å®Œå…¨ä¸€è‡´çš„ï¼Œå…¨æ˜¯ 1 ä¸ªåƒç´ çš„ç‚¹ï¼›è€Œå½“çº¿æ¡å˜ç²—çš„æ—¶å€™ï¼Œå®ƒä»¬å°±ä¼šè¡¨ç°å‡ºä¸åŒçš„æ ·å­ï¼š
![](https://ws4.sinaimg.cn/large/006tNc79ly1fig74qv8rij30ct05rglp.jpg)
è™šçº¿æ˜¯é¢å¤–åŠ çš„ï¼Œè™šçº¿å·¦è¾¹æ˜¯çº¿çš„å®é™…é•¿åº¦ï¼Œè™šçº¿å³è¾¹æ˜¯çº¿å¤´ã€‚æœ‰äº†è™šçº¿ä½œä¸ºè¾…åŠ©ï¼Œå¯ä»¥æ¸…æ¥šåœ°çœ‹å‡º `BUTT` å’Œ `SQUARE` çš„åŒºåˆ«ã€‚ #### 2.3.3
setStrokeJoin(Paint.Join join) è®¾ç½®æ‹è§’çš„å½¢çŠ¶ã€‚æœ‰ä¸‰ä¸ªå€¼å¯ä»¥é€‰æ‹©ï¼š`MITER` å°–è§’ã€ `BEVEL` å¹³è§’å’Œ
`ROUND` åœ†è§’ã€‚é»˜è®¤ä¸º `MITER`ã€‚
![](https://ws1.sinaimg.cn/large/006tNc79ly1fig75e27w6j30cp05ewem.jpg) > è¾…åŠ©ç†è§£ï¼š
> > MITER åœ¨ç°å®ä¸­å…¶å®å°±æ˜¯è¿™ç©æ„ï¼š > >
![](https://ws2.sinaimg.cn/large/006tNc79ly1fig75ne2avj30jw0avt9n.jpg) > > è€Œ
BEVEL æ˜¯è¿™ç©æ„ï¼š > >
![](https://ws2.sinaimg.cn/large/006tNc79ly1fig762ptvdj307u05l74d.jpg) ####
2.3.4 setStrokeMiter(float miter) è¿™ä¸ªæ–¹æ³•æ˜¯å¯¹äº `setStrokeJoin()` çš„ä¸€ä¸ªè¡¥å……ï¼Œå®ƒç”¨äºè®¾ç½®
`MITER` å‹æ‹è§’çš„å»¶é•¿çº¿çš„æœ€å¤§å€¼ã€‚æ‰€è°“ã€Œå»¶é•¿çº¿çš„æœ€å¤§å€¼ã€ï¼Œæ˜¯è¿™ä¹ˆä¸€å›äº‹ï¼š å½“çº¿æ¡æ‹è§’ä¸º `MITER` æ—¶ï¼Œæ‹è§’å¤„çš„å¤–ç¼˜éœ€è¦ä½¿ç”¨å»¶é•¿çº¿æ¥è¡¥å¿ï¼š
![](https://ws1.sinaimg.cn/large/006tNc79ly1fig7ak3kqgj30cs0cq74j.jpg)
è€Œè¿™ç§è¡¥å¿æ–¹æ¡ˆä¼šæœ‰ä¸€ä¸ªé—®é¢˜ï¼šå¦‚æœæ‹è§’çš„è§’åº¦å¤ªå°ï¼Œå°±æœ‰å¯èƒ½ç”±äºå‡ºç°è¿æ¥ç‚¹è¿‡é•¿çš„æƒ…å†µã€‚æ¯”å¦‚è¿™æ ·ï¼š
![](https://ws4.sinaimg.cn/large/006tNc79ly1fig7bdt8wxj30eg0673yl.jpg)
æ‰€ä»¥ä¸ºäº†é¿å…æ„æ–™ä¹‹å¤–çš„è¿‡é•¿çš„å°–è§’å‡ºç°ï¼Œ `MITER` å‹è¿æ¥ç‚¹æœ‰ä¸€ä¸ªé¢å¤–çš„è§„åˆ™ï¼šå½“å°–è§’è¿‡é•¿æ—¶ï¼Œè‡ªåŠ¨æ”¹ç”¨ `BEVEL`
çš„æ–¹å¼æ¥æ¸²æŸ“è¿æ¥ç‚¹ã€‚ä¾‹å¦‚ä¸Šå›¾çš„è¿™ä¸ªå°–è§’ï¼Œåœ¨é»˜è®¤æƒ…å†µä¸‹æ˜¯ä¸ä¼šå‡ºç°çš„ï¼Œè€Œæ˜¯ä¼šç”±äºå»¶é•¿çº¿è¿‡é•¿è€Œè¢«è½¬ä¸º `BEVEL` å‹è¿æ¥ç‚¹ï¼š
![](https://ws2.sinaimg.cn/large/006tNc79ly1fig7bonurpj307502yjra.jpg)
è‡³äºå¤šå°–çš„è§’å±äºè¿‡äºå°–ï¼Œå°–åˆ°éœ€è¦è½¬ä¸ºä½¿ç”¨ `BEVEL` æ¥ç»˜åˆ¶ï¼Œåˆ™æ˜¯ç”±ä¸€ä¸ªå±æ€§æ§åˆ¶çš„ï¼Œè€Œè¿™ä¸ªå±æ€§å°±æ˜¯ `setStrokeMiter(miter)`
æ–¹æ³•ä¸­çš„ `miter` å‚æ•°ã€‚`miter`
å‚æ•°æ˜¯å¯¹äºè½¬è§’é•¿åº¦çš„é™åˆ¶ï¼Œå…·ä½“æ¥è®²ï¼Œæ˜¯æŒ‡å°–è§’çš„å¤–ç¼˜ç«¯ç‚¹å’Œå†…éƒ¨æ‹è§’çš„è·ç¦»ä¸çº¿æ¡å®½åº¦çš„æ¯”ã€‚ä¹Ÿå°±æ˜¯ä¸‹é¢è¿™ä¸¤ä¸ªé•¿åº¦çš„æ¯”ï¼š
![](https://ws3.sinaimg.cn/large/006tNc79ly1fig7btolhij30e706dglp.jpg)
ç”¨å‡ ä½•çŸ¥è¯†å¾ˆå®¹æ˜“å¾—å‡ºè¿™ä¸ªæ¯”å€¼çš„è®¡ç®—å…¬å¼ï¼šå¦‚æœæ‹è§’çš„å¤§å°ä¸º Î¸ ï¼Œé‚£ä¹ˆè¿™ä¸ªæ¯”å€¼å°±ç­‰äº 1 / sin ( Î¸ / 2 ) ã€‚ è¿™ä¸ª miter limit
çš„é»˜è®¤å€¼æ˜¯ 4ï¼Œå¯¹åº”çš„æ˜¯ä¸€ä¸ªå¤§çº¦ 29Â° çš„é”è§’ï¼š
![](https://ws2.sinaimg.cn/large/006tNc79ly1fig7bytfd9j307n03lq2v.jpg) >
é»˜è®¤æƒ…å†µä¸‹ï¼Œå¤§äºè¿™ä¸ªè§’çš„å°–è§’ä¼šè¢«ä¿ç•™ï¼Œè€Œå°äºè¿™ä¸ªå¤¹è§’çš„å°±ä¼šè¢«ã€Œå‰Šæˆå¹³å¤´ã€ > æ‰€ä»¥ï¼Œè¿™ä¸ªæ–¹æ³•è™½ç„¶åå« `setStrokeMiter(miter)`
ï¼Œä½†å®ƒå…¶å®è®¾ç½®çš„æ˜¯ã€Œ çº¿æ¡åœ¨ `Join` ç±»å‹ä¸º `MITER` æ—¶å¯¹äº `MITER` çš„é•¿åº¦é™åˆ¶ã€ã€‚å®ƒçš„è¿™ä¸ªåå­—è™½ç„¶çŸ­ï¼Œä½†å´å­˜åœ¨ä¸€å®šçš„è¿·æƒ‘æ€§ï¼Œå¦‚æœå«
`setStrokeJoinMiterLimit(limit)` å°±æ›´å‡†ç¡®äº†ã€‚ Google
çš„å·¥ç¨‹å¸ˆæ²¡æœ‰è¿™ä¹ˆç»™å®ƒå‘½åï¼Œå¤§æ¦‚ä¹Ÿæ˜¯ä¸æƒ³ä¼¤å®³å¤§å®¶çš„æ‰‹æŒ‡å§ï¼Œæ¯•ç«Ÿç¨‹åºå‘˜ä½•è‹¦ä¸ºéš¾ç¨‹åºå‘˜ã€‚ > >
![](https://ws1.sinaimg.cn/large/006tNc79ly1fig7c4wf8uj304z05et8u.jpg) ä»¥ä¸Šå°±æ˜¯ 4
ä¸ªå…³äºçº¿æ¡å½¢çŠ¶çš„æ–¹æ³•ï¼š `setStrokeWidth(width)` `setStrokeCap(cap)` `setStrokeJoint(join)`
å’Œ `setStrokeMiter(miter)`ã€‚ ### 2.4 è‰²å½©ä¼˜åŒ– `Paint` çš„è‰²å½©ä¼˜åŒ–æœ‰ä¸¤ä¸ªæ–¹æ³•ï¼š `setDither(boolean
dither)` å’Œ `setFilterBitmap(boolean filter)`
ã€‚å®ƒä»¬çš„ä½œç”¨éƒ½æ˜¯è®©ç”»é¢é¢œè‰²å˜å¾—æ›´åŠ ã€Œé¡ºçœ¼ã€ï¼Œä½†åŸç†å’Œä½¿ç”¨åœºæ™¯æ˜¯ä¸åŒçš„ã€‚ #### 2.4.1 setDither(boolean dither)
è®¾ç½®å›¾åƒçš„æŠ–åŠ¨ã€‚ åœ¨ä»‹ç»æŠ–åŠ¨ä¹‹å‰ï¼Œå…ˆæ¥çœ‹ä¸€ä¸ªçŒ¥çç”·ï¼š
![](https://ws4.sinaimg.cn/large/006tNc79ly1fig7cf7oc3j30i30a4wfi.jpg)
æ³¨æ„æ¯›åˆ©å°äº”éƒè„¸ä¸Šçš„çº¢æ™•ï¼Œå®ƒä»¬å¹¶ä¸æ˜¯ä½¿ç”¨ä¸€ç‰‡æ·¡çº¢è‰²æ¶‚æŠ¹å‡ºæ¥çš„ï¼Œè€Œæ˜¯ç”»äº†ä¸‰é“æ·±è‰²çš„çº¢çº¿ã€‚è¿™ä¸‰é“æ·±è‰²çº¢çº¿æ”¾åœ¨è„¸ä¸Šï¼Œç»™äººçš„è§†è§‰æ•ˆæœå°±æˆäº†ã€Œæ·¡æ·¡çš„çº¢æ™•ã€ã€‚
æŠ–åŠ¨çš„åŸç†å’Œè¿™ä¸ªç±»ä¼¼ã€‚æ‰€è°“æŠ–åŠ¨ï¼ˆæ³¨æ„ï¼Œå®ƒå°±å«æŠ–åŠ¨ï¼Œä¸æ˜¯é˜²æŠ–åŠ¨ï¼Œä¹Ÿä¸æ˜¯å»æŠ–åŠ¨ï¼Œæœ‰äº›äººåœ¨ç¿»è¯‘çš„æ—¶å€™è‡ªä½œä¸»å¼ åœ°åŠ äº†ä¸€ä¸ªã€Œé˜²ã€å­—æˆ–è€…ã€Œå»ã€å­—ï¼Œè¿™æ˜¯ä¸å¯¹çš„ï¼‰ï¼Œæ˜¯æŒ‡æŠŠå›¾åƒä»è¾ƒé«˜è‰²å½©æ·±åº¦ï¼ˆå³å¯ç”¨çš„é¢œè‰²æ•°ï¼‰å‘è¾ƒä½è‰²å½©æ·±åº¦çš„åŒºåŸŸç»˜åˆ¶æ—¶ï¼Œåœ¨å›¾åƒä¸­æœ‰æ„åœ°æ’å…¥å™ªç‚¹ï¼Œé€šè¿‡æœ‰è§„å¾‹åœ°æ‰°ä¹±å›¾åƒæ¥è®©å›¾åƒå¯¹äºè‚‰çœ¼æ›´åŠ çœŸå®çš„åšæ³•ã€‚
æ¯”å¦‚å‘ 1 ä½è‰²å½©æ·±åº¦çš„åŒºåŸŸä¸­ç»˜åˆ¶ç°è‰²ï¼Œç”±äº 1
ä½æ·±åº¦åªåŒ…å«é»‘å’Œç™½ä¸¤ç§é¢œè‰²ï¼Œåœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œå³ä¸åŠ æŠ–åŠ¨çš„æ—¶å€™ï¼Œåªèƒ½é€‰æ‹©å‘ä¸Šæˆ–å‘ä¸‹é€‰æ‹©æœ€æ¥è¿‘ç°è‰²çš„ç™½è‰²æˆ–é»‘è‰²æ¥ç»˜åˆ¶ï¼Œé‚£ä¹ˆæ˜¾ç¤ºå‡ºæ¥ä¹Ÿåªèƒ½æ˜¯ä¸€ç‰‡ç™½æˆ–è€…ä¸€ç‰‡é»‘ã€‚è€ŒåŠ äº†æŠ–åŠ¨åï¼Œå°±å¯ä»¥ç»˜åˆ¶å‡ºè®©è‚‰çœ¼è¯†åˆ«ä¸ºç°è‰²çš„æ•ˆæœäº†ï¼š
![](https://ws3.sinaimg.cn/large/006tNc79ly1fig7clzhfpj30k60armxr.jpg)
ç§ï¼Œåƒä¸Šé¢è¿™æ ·ï¼Œç”¨é»‘ç™½ç›¸é—´çš„æ–¹å¼æ¥ç»˜åˆ¶ï¼Œå°±å¯ä»¥éª—è¿‡è‚‰çœ¼ï¼Œè®©è‚‰çœ¼è¾¨åˆ«ä¸ºç°è‰²äº†ã€‚
å—¯ï¼Ÿä½ è¯´ä½ çœ‹ä¸å‡ºç°è‰²ï¼Œåªçœ‹å‡ºé»‘ç™½ç›¸é—´ï¼Ÿæ²¡å…³ç³»ï¼Œé‚£æ˜¯å› ä¸ºåƒç´ é¢—ç²’å¤ªå¤§ï¼Œæˆ‘æŠŠåƒç´ é¢—ç²’ç¼©å°ï¼Œçœ‹åˆ°å®Œæ•´æ•ˆæœä½ å°±ä¼šå‘ç°å˜ç°äº†ï¼š
![](https://ws1.sinaimg.cn/large/006tNc79ly1fig7ctjqsqj309q0bytan.jpg) è¿™ä¸‹å˜ç°äº†å§ï¼Ÿ
ä»€ä¹ˆï¼Œè¿˜æ²¡æœ‰å˜ç°ï¼Ÿé‚£ä¸€å®šæ˜¯ä½ çœ‹å›¾çš„å§¿åŠ¿ä¸å¯¹äº†ã€‚
![](https://ws4.sinaimg.cn/large/006tNc79ly1fig7cxlyluj30gg0n00vf.jpg)
ä¸è¿‡ï¼ŒæŠ–åŠ¨å¯ä¸åªå¯ä»¥ç”¨åœ¨çº¯è‰²çš„ç»˜åˆ¶ã€‚åœ¨å®é™…çš„åº”ç”¨åœºæ™¯ä¸­ï¼ŒæŠ–åŠ¨æ›´å¤šçš„ä½œç”¨æ˜¯åœ¨å›¾åƒé™ä½è‰²å½©æ·±åº¦ç»˜åˆ¶æ—¶ï¼Œé¿å…å‡ºç°å¤§ç‰‡çš„è‰²å¸¦ä¸è‰²å—ã€‚æ•ˆæœç›—ä¸€ä¸‹[ç»´åŸºç™¾ç§‘](https://en.wikipedia.org/wiki/Dither)çš„å›¾ï¼š
![](https://ws4.sinaimg.cn/large/006tNc79ly1fig7d34s0jj30lf07t75x.jpg)
çœ‹ç€å¾ˆç‰›é€¼å¯¹å§ï¼Ÿç¡®å®å¾ˆç‰›é€¼ï¼Œè€Œä¸”åœ¨ Android é‡Œä½¿ç”¨èµ·æ¥ä¹Ÿå¾ˆç®€å•ï¼Œä¸€è¡Œä»£ç å°±æå®šï¼š paint.setDither(true);
åªè¦åŠ è¿™ä¹ˆä¸€è¡Œä»£ç ï¼Œä¹‹åçš„ç»˜åˆ¶å°±æ˜¯åŠ æŠ–åŠ¨çš„äº†ã€‚ ä¸è¿‡å¯¹äºç°åœ¨ï¼ˆ2017å¹´ï¼‰è€Œè¨€ï¼Œ `setDither(dither)` å·²ç»æ²¡æœ‰å½“å¹´é‚£ä¹ˆå®ç”¨äº†ï¼Œå› ä¸ºç°åœ¨çš„
Android ç‰ˆæœ¬çš„ç»˜åˆ¶ï¼Œé»˜è®¤çš„è‰²å½©æ·±åº¦å·²ç»æ˜¯ 32 ä½çš„ `ARGB_8888` ï¼Œæ•ˆæœå·²ç»è¶³å¤Ÿæ¸…æ™°äº†ã€‚åªæœ‰å½“ä½ å‘è‡ªå»ºçš„ `Bitmap`
ä¸­ç»˜åˆ¶ï¼Œå¹¶ä¸”é€‰æ‹© 16 ä½è‰²çš„ `ARGB_4444` æˆ–è€… `RGB_565` çš„æ—¶å€™ï¼Œå¼€å¯å®ƒæ‰ä¼šæœ‰æ¯”è¾ƒæ˜æ˜¾çš„æ•ˆæœã€‚ #### 2.4.2
setFilterBitmap(boolean filter) è®¾ç½®æ˜¯å¦ä½¿ç”¨åŒçº¿æ€§è¿‡æ»¤æ¥ç»˜åˆ¶ `Bitmap` ã€‚
å›¾åƒåœ¨æ”¾å¤§ç»˜åˆ¶çš„æ—¶å€™ï¼Œé»˜è®¤ä½¿ç”¨çš„æ˜¯æœ€è¿‘é‚»æ’å€¼è¿‡æ»¤ï¼Œè¿™ç§ç®—æ³•ç®€å•ï¼Œä½†ä¼šå‡ºç°é©¬èµ›å…‹ç°è±¡ï¼›è€Œå¦‚æœå¼€å¯äº†åŒçº¿æ€§è¿‡æ»¤ï¼Œå°±å¯ä»¥è®©ç»“æœå›¾åƒæ˜¾å¾—æ›´åŠ å¹³æ»‘ã€‚æ•ˆæœä¾ç„¶ç›—[ç»´åŸºç™¾ç§‘](https://zh.wikipedia.org/wiki/%E5%8F%8C%E7%BA%BF%E6%80%A7%E8%BF%87%E6%BB%A4)çš„å›¾ï¼š
![](https://ws2.sinaimg.cn/large/006tNc79ly1fig7dbga6ij30jb0a00tr.jpg)
ç‰›é€¼å§ï¼Ÿè€Œä¸”å®ƒçš„ä½¿ç”¨åŒæ ·ä¹Ÿå¾ˆç®€å•ï¼š paint.setFilterBitmap(true); åŠ ä¸Šè¿™ä¸€è¡Œï¼Œåœ¨æ”¾å¤§ç»˜åˆ¶ `Bitmap`
çš„æ—¶å€™å°±ä¼šä½¿ç”¨åŒçº¿æ€§è¿‡æ»¤äº†ã€‚ ä»¥ä¸Šå°±æ˜¯ `Paint` çš„ä¸¤ä¸ªè‰²å½©ä¼˜åŒ–çš„æ–¹æ³•ï¼š `setDither(dither)`
ï¼Œè®¾ç½®æŠ–åŠ¨æ¥ä¼˜åŒ–è‰²å½©æ·±åº¦é™ä½æ—¶çš„ç»˜åˆ¶æ•ˆæœï¼› `setFilterBitmap(filterBitmap)` ï¼Œè®¾ç½®åŒçº¿æ€§è¿‡æ»¤æ¥ä¼˜åŒ– `Bitmap`
æ”¾å¤§ç»˜åˆ¶çš„æ•ˆæœã€‚ ### 2.5 setPathEffect(PathEffect effect) ä½¿ç”¨ `PathEffect`
æ¥ç»™å›¾å½¢çš„è½®å»“è®¾ç½®æ•ˆæœã€‚å¯¹ `Canvas` æ‰€æœ‰çš„å›¾å½¢ç»˜åˆ¶æœ‰æ•ˆï¼Œä¹Ÿå°±æ˜¯ `drawLine()` `drawCircle()` `drawPath()`
è¿™äº›æ–¹æ³•ã€‚å¤§æ¦‚åƒè¿™æ ·ï¼š PathEffect pathEffect = new DashPathEffect(new float[]{10, 5},
10); paint.setPathEffect(pathEffect); ... canvas.drawCircle(300, 300, 200,
paint); ![](https://ws4.sinaimg.cn/large/006tNc79ly1fig7diyn5jj308h089mx5.jpg)
ä¸‹é¢å°±å…·ä½“è¯´ä¸€ä¸‹ Android ä¸­çš„ 6 ç§ `PathEffect`ã€‚`PathEffect` åˆ†ä¸ºä¸¤ç±»ï¼Œå•ä¸€æ•ˆæœçš„
`CornerPathEffect` `DiscretePathEffect` `DashPathEffect` `PathDashPathEffect`
ï¼Œå’Œç»„åˆæ•ˆæœçš„ `SumPathEffect` `ComposePathEffect`ã€‚ #### 2.5.1 CornerPathEffect
æŠŠæ‰€æœ‰æ‹è§’å˜æˆåœ†è§’ã€‚ PathEffect pathEffect = new CornerPathEffect(20);
paint.setPathEffect(pathEffect); ... canvas.drawPath(path, paint);
![](https://ws1.sinaimg.cn/large/006tNc79ly1fig7dobrizj30iv0agt8z.jpg) å®ƒçš„æ„é€ æ–¹æ³•
`CornerPathEffect(float radius)` çš„å‚æ•° `radius` æ˜¯åœ†è§’çš„åŠå¾„ã€‚ #### 2.5.2
DiscretePathEffect æŠŠçº¿æ¡è¿›è¡Œéšæœºçš„åç¦»ï¼Œè®©è½®å»“å˜å¾—ä¹±ä¸ƒå…«ç³Ÿã€‚ä¹±ä¸ƒå…«ç³Ÿçš„æ–¹å¼å’Œç¨‹åº¦ç”±å‚æ•°å†³å®šã€‚ PathEffect pathEffect
= new DiscretePathEffect(20, 5); paint.setPathEffect(pathEffect); ...
canvas.drawPath(path, paint);
![](https://ws2.sinaimg.cn/large/006tNc79ly1fig7dug01cj30ir0bawet.jpg)
`DiscretePathEffect` å…·ä½“çš„åšæ³•æ˜¯ï¼ŒæŠŠç»˜åˆ¶æ”¹ä¸ºä½¿ç”¨å®šé•¿çš„çº¿æ®µæ¥æ‹¼æ¥ï¼Œå¹¶ä¸”åœ¨æ‹¼æ¥çš„æ—¶å€™å¯¹è·¯å¾„è¿›è¡Œéšæœºåç¦»ã€‚å®ƒçš„æ„é€ æ–¹æ³•
`DiscretePathEffect(float segmentLength, float deviation)` çš„ä¸¤ä¸ªå‚æ•°ä¸­ï¼Œ
`segmentLength` æ˜¯ç”¨æ¥æ‹¼æ¥çš„æ¯ä¸ªçº¿æ®µçš„é•¿åº¦ï¼Œ `deviation`
æ˜¯åç¦»é‡ã€‚è¿™ä¸¤ä¸ªå€¼è®¾ç½®å¾—ä¸ä¸€æ ·ï¼Œæ˜¾ç¤ºæ•ˆæœä¹Ÿä¼šä¸ä¸€æ ·ï¼Œå…·ä½“çš„ä½ è‡ªå·±å¤šè¯•å‡ æ¬¡å°±æ˜ç™½äº†ï¼Œè¿™é‡Œä¸å†è´´æ›´å¤šçš„å›¾ã€‚ #### 2.5.3 DashPathEffect
ä½¿ç”¨è™šçº¿æ¥ç»˜åˆ¶çº¿æ¡ã€‚ PathEffect pathEffect = new DashPathEffect(new float[]{20, 10, 5,
10}, 0); paint.setPathEffect(pathEffect); ... canvas.drawPath(path, paint);
![](https://ws4.sinaimg.cn/large/006tNc79ly1fig7dz1jenj30iw0b9mxh.jpg) å®ƒçš„æ„é€ æ–¹æ³•
`DashPathEffect(float[] intervals, float phase)` ä¸­ï¼Œ ç¬¬ä¸€ä¸ªå‚æ•° `intervals`
æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œå®ƒæŒ‡å®šäº†è™šçº¿çš„æ ¼å¼ï¼šæ•°ç»„ä¸­å…ƒç´ å¿…é¡»ä¸ºå¶æ•°ï¼ˆæœ€å°‘æ˜¯ 2 ä¸ªï¼‰ï¼ŒæŒ‰ç…§ã€Œç”»çº¿é•¿åº¦ã€ç©ºç™½é•¿åº¦ã€ç”»çº¿é•¿åº¦ã€ç©ºç™½é•¿åº¦ã€â€¦â€¦çš„é¡ºåºæ’åˆ—ï¼Œä¾‹å¦‚ä¸Šé¢ä»£ç ä¸­çš„
`20, 5, 10, 5` å°±è¡¨ç¤ºè™šçº¿æ˜¯æŒ‰ç…§ã€Œç”» 20 åƒç´ ã€ç©º 5 åƒç´ ã€ç”» 10 åƒç´ ã€ç©º 5 åƒç´ ã€çš„æ¨¡å¼æ¥ç»˜åˆ¶ï¼›ç¬¬äºŒä¸ªå‚æ•° `phase`
æ˜¯è™šçº¿çš„åç§»é‡ã€‚ #### 2.5.4 PathDashPathEffect è¿™ä¸ªæ–¹æ³•æ¯” `DashPathEffect` å¤šä¸€ä¸ªå‰ç¼€ `Path`
ï¼Œæ‰€ä»¥é¡¾åæ€ä¹‰ï¼Œå®ƒæ˜¯ä½¿ç”¨ä¸€ä¸ª `Path` æ¥ç»˜åˆ¶ã€Œè™šçº¿ã€ã€‚å…·ä½“çœ‹å›¾å§ï¼š Path dashPath = ...; // ä½¿ç”¨ä¸€ä¸ªä¸‰è§’å½¢æ¥åš dash
PathEffect pathEffect = new PathDashPathEffect(dashPath, 40, 0,
PathDashPathEffectStyle.TRANSLATE); paint.setPathEffect(pathEffect); ...
canvas.drawPath(path, paint);
![](https://ws2.sinaimg.cn/large/006tNc79ly1fig7e4xp38j30j30bc0t7.jpg) å®ƒçš„æ„é€ æ–¹æ³•
`PathDashPathEffect(Path shape, float advance, float phase,
PathDashPathEffect.Style style)` ä¸­ï¼Œ `shape` å‚æ•°æ˜¯ç”¨æ¥ç»˜åˆ¶çš„ `Path` ï¼› `advance` æ˜¯ä¸¤ä¸ªç›¸é‚»çš„
`shape` æ®µä¹‹é—´çš„é—´éš”ï¼Œä¸è¿‡æ³¨æ„ï¼Œè¿™ä¸ªé—´éš”æ˜¯ä¸¤ä¸ª `shape` æ®µçš„èµ·ç‚¹çš„é—´éš”ï¼Œè€Œä¸æ˜¯å‰ä¸€ä¸ªçš„ç»ˆç‚¹å’Œåä¸€ä¸ªçš„èµ·ç‚¹çš„è·ç¦»ï¼› `phase` å’Œ
`DashPathEffect` ä¸­ä¸€æ ·ï¼Œæ˜¯è™šçº¿çš„åç§»ï¼›æœ€åä¸€ä¸ªå‚æ•° `style`ï¼Œæ˜¯ç”¨æ¥æŒ‡å®šæ‹å¼¯æ”¹å˜çš„æ—¶å€™ `shape` çš„è½¬æ¢æ–¹å¼ã€‚`style`
çš„ç±»å‹ä¸º `PathDashPathEffect.Style` ï¼Œæ˜¯ä¸€ä¸ª `enum` ï¼Œå…·ä½“æœ‰ä¸‰ä¸ªå€¼ï¼š * `TRANSLATE`ï¼šä½ç§» *
`ROTATE`ï¼šæ—‹è½¬ * `MORPH`ï¼šå˜ä½“
![](https://ws1.sinaimg.cn/large/006tNc79ly1fig7efqw9qj30kn0h3dh5.jpg) ####
2.5.5 SumPathEffect è¿™æ˜¯ä¸€ä¸ªç»„åˆæ•ˆæœç±»çš„ `PathEffect` ã€‚å®ƒçš„è¡Œä¸ºç‰¹åˆ«ç®€å•ï¼Œå°±æ˜¯åˆ†åˆ«æŒ‰ç…§ä¸¤ç§ `PathEffect`
åˆ†åˆ«å¯¹ç›®æ ‡è¿›è¡Œç»˜åˆ¶ã€‚ PathEffect dashEffect = new DashPathEffect(new float[]{20, 10}, 0);
PathEffect discreteEffect = new DiscretePathEffect(20, 5); pathEffect = new
SumPathEffect(dashEffect, discreteEffect); ... canvas.drawPath(path, paint);
![](https://ws1.sinaimg.cn/large/006tNc79ly1fig7ekjh7lj30dw05jq2z.jpg) ####
2.5.6 ComposePathEffect è¿™ä¹Ÿæ˜¯ä¸€ä¸ªç»„åˆæ•ˆæœç±»çš„ `PathEffect` ã€‚ä¸è¿‡å®ƒæ˜¯å…ˆå¯¹ç›®æ ‡ `Path` ä½¿ç”¨ä¸€ä¸ª
`PathEffect`ï¼Œç„¶åå†å¯¹è¿™ä¸ªæ”¹å˜åçš„ `Path` ä½¿ç”¨å¦ä¸€ä¸ª `PathEffect`ã€‚ PathEffect dashEffect = new
DashPathEffect(new float[]{20, 10}, 0); PathEffect discreteEffect = new
DiscretePathEffect(20, 5); pathEffect = new ComposePathEffect(dashEffect,
discreteEffect); ... canvas.drawPath(path, paint);
![](https://ws3.sinaimg.cn/large/006tNc79ly1fig7epf94aj30dr05eq2x.jpg) å®ƒçš„æ„é€ æ–¹æ³•
`ComposePathEffect(PathEffect outerpe, PathEffect innerpe)` ä¸­çš„ä¸¤ä¸ª `PathEffect`
å‚æ•°ï¼Œ `innerpe` æ˜¯å…ˆåº”ç”¨çš„ï¼Œ `outerpe`
æ˜¯ååº”ç”¨çš„ã€‚æ‰€ä»¥ä¸Šé¢çš„ä»£ç å°±æ˜¯ã€Œå…ˆåç¦»ï¼Œå†å˜è™šçº¿ã€ã€‚è€Œå¦‚æœæŠŠä¸¤ä¸ªå‚æ•°è°ƒæ¢ï¼Œå°±æˆäº†ã€Œå…ˆå˜è™šçº¿ï¼Œå†åç¦»ã€ã€‚è‡³äºå…·ä½“çš„è§†è§‰æ•ˆæœâ€¦â€¦æˆ‘å°±ä¸è´´å›¾äº†ï¼Œä½ è‡ªå·±è¯•è¯•çœ‹å§ï¼
ä¸Šé¢è¿™äº›å°±æ˜¯ `Paint` ä¸­çš„ 6 ç§ `PathEffect`ã€‚å®ƒä»¬æœ‰çš„æ˜¯æœ‰ç‹¬ç«‹æ•ˆæœçš„ï¼Œæœ‰çš„æ˜¯ç”¨æ¥ç»„åˆä¸åŒçš„ `PathEffect`
çš„ï¼ŒåŠŸèƒ½å„ä¸ä¸€æ ·ã€‚ > æ³¨æ„ï¼š `PathEffect` åœ¨æœ‰äº›æƒ…å†µä¸‹ä¸æ”¯æŒç¡¬ä»¶åŠ é€Ÿï¼Œéœ€è¦å…³é—­ç¡¬ä»¶åŠ é€Ÿæ‰èƒ½æ­£å¸¸ä½¿ç”¨ï¼š > > 1.
`Canvas.drawLine()` å’Œ `Canvas.drawLines()` æ–¹æ³•ç”»ç›´çº¿æ—¶ï¼Œ`setPathEffect()` æ˜¯ä¸æ”¯æŒç¡¬ä»¶åŠ é€Ÿçš„ï¼›
> 2. `PathDashPathEffect` å¯¹ç¡¬ä»¶åŠ é€Ÿçš„æ”¯æŒä¹Ÿæœ‰é—®é¢˜ï¼Œæ‰€ä»¥å½“ä½¿ç”¨ `PathDashPathEffect`
çš„æ—¶å€™ï¼Œæœ€å¥½ä¹ŸæŠŠç¡¬ä»¶åŠ é€Ÿå…³äº†ã€‚ > å‰©ä¸‹çš„ä¸¤ä¸ªæ•ˆæœç±»æ–¹æ³•ï¼š`setShadowLayer()` å’Œ `setMaskFilter()`
ï¼Œå®ƒä»¬å’Œå‰é¢çš„æ•ˆæœç±»æ–¹æ³•æœ‰ç‚¹ä¸ä¸€æ ·ï¼šå®ƒä»¬è®¾ç½®çš„æ˜¯ã€Œé™„åŠ æ•ˆæœã€ï¼Œä¹Ÿå°±æ˜¯åŸºäºåœ¨ç»˜åˆ¶å†…å®¹çš„é¢å¤–æ•ˆæœã€‚ ### 2.6 setShadowLayer(float
radius, float dx, float dy, int shadowColor) åœ¨ä¹‹åçš„ç»˜åˆ¶å†…å®¹ä¸‹é¢åŠ ä¸€å±‚é˜´å½±ã€‚
paint.setShadowLayer(10, 0, 0, Color.RED); ... canvas.drawText(text, 80, 300,
paint); ![](https://ws4.sinaimg.cn/large/006tNc79ly1fig7ev8io8j30cv02y74f.jpg)
æ•ˆæœå°±æ˜¯ä¸Šé¢è¿™æ ·ã€‚æ–¹æ³•çš„å‚æ•°é‡Œï¼Œ `radius` æ˜¯é˜´å½±çš„æ¨¡ç³ŠèŒƒå›´ï¼› `dx` `dy` æ˜¯é˜´å½±çš„åç§»é‡ï¼› `shadowColor` æ˜¯é˜´å½±çš„é¢œè‰²ã€‚
å¦‚æœè¦æ¸…é™¤é˜´å½±å±‚ï¼Œä½¿ç”¨ `clearShadowLayer()` ã€‚ æ³¨æ„ï¼š * åœ¨ç¡¬ä»¶åŠ é€Ÿå¼€å¯çš„æƒ…å†µä¸‹ï¼Œ `setShadowLayer()`
åªæ”¯æŒæ–‡å­—çš„ç»˜åˆ¶ï¼Œæ–‡å­—ä¹‹å¤–çš„ç»˜åˆ¶å¿…é¡»å…³é—­ç¡¬ä»¶åŠ é€Ÿæ‰èƒ½æ­£å¸¸ç»˜åˆ¶é˜´å½±ã€‚ * å¦‚æœ `shadowColor` æ˜¯åŠé€æ˜çš„ï¼Œé˜´å½±çš„é€æ˜åº¦å°±ä½¿ç”¨
`shadowColor` è‡ªå·±çš„é€æ˜åº¦ï¼›è€Œå¦‚æœ `shadowColor` æ˜¯ä¸é€æ˜çš„ï¼Œé˜´å½±çš„é€æ˜åº¦å°±ä½¿ç”¨ `paint` çš„é€æ˜åº¦ã€‚ ### 2.7
setMaskFilter(MaskFilter maskfilter) ä¸ºä¹‹åçš„ç»˜åˆ¶è®¾ç½® `MaskFilter`ã€‚ä¸Šä¸€ä¸ªæ–¹æ³•
`setShadowLayer()` æ˜¯è®¾ç½®çš„åœ¨ç»˜åˆ¶å±‚ä¸‹æ–¹çš„é™„åŠ æ•ˆæœï¼›è€Œè¿™ä¸ª `MaskFilter` å’Œå®ƒç›¸åï¼Œè®¾ç½®çš„æ˜¯åœ¨ç»˜åˆ¶å±‚ä¸Šæ–¹çš„é™„åŠ æ•ˆæœã€‚ >
åˆ°ç°åœ¨å·²ç»æœ‰ä¸¤ä¸ª `setXxxFilter(filter)` äº†ã€‚å‰é¢æœ‰ä¸€ä¸ª `setColorFilter(filter)`
ï¼Œæ˜¯å¯¹æ¯ä¸ªåƒç´ çš„é¢œè‰²è¿›è¡Œè¿‡æ»¤ï¼›è€Œè¿™é‡Œçš„ `setMaskFilter(filter)` åˆ™æ˜¯åŸºäºæ•´ä¸ªç”»é¢æ¥è¿›è¡Œè¿‡æ»¤ã€‚ `MaskFilter` æœ‰ä¸¤ç§ï¼š
`BlurMaskFilter` å’Œ `EmbossMaskFilter`ã€‚ #### 2.7.1 BlurMaskFilter æ¨¡ç³Šæ•ˆæœçš„
`MaskFilter`ã€‚ paint.setMaskFilter(new BlurMaskFilter(50,
BlurMaskFilter.Blur.NORMAL)); ... canvas.drawBitmap(bitmap, 100, 100, paint);
![](https://ws1.sinaimg.cn/large/006tNc79ly1fig7f17yu0j30kl0b2q3w.jpg) å®ƒçš„æ„é€ æ–¹æ³•
`BlurMaskFilter(float radius, BlurMaskFilter.Blur style)` ä¸­ï¼Œ `radius`
å‚æ•°æ˜¯æ¨¡ç³Šçš„èŒƒå›´ï¼Œ `style` æ˜¯æ¨¡ç³Šçš„ç±»å‹ã€‚ä¸€å…±æœ‰å››ç§ï¼š * `NORMAL`: å†…å¤–éƒ½æ¨¡ç³Šç»˜åˆ¶ * `SOLID`: å†…éƒ¨æ­£å¸¸ç»˜åˆ¶ï¼Œå¤–éƒ¨æ¨¡ç³Š *
`INNER`: å†…éƒ¨æ¨¡ç³Šï¼Œå¤–éƒ¨ä¸ç»˜åˆ¶ * `OUTER`: å†…éƒ¨ä¸ç»˜åˆ¶ï¼Œå¤–éƒ¨æ¨¡ç³Šï¼ˆä»€ä¹ˆé¬¼ï¼Ÿï¼‰
![](https://ws3.sinaimg.cn/large/006tNc79ly1fig7fr4dwgj30lk0mbgne.jpg) ####
2.7.2 EmbossMaskFilter æµ®é›•æ•ˆæœçš„ `MaskFilter`ã€‚ paint.setMaskFilter(new
EmbossMaskFilter(new float[]{0, 1, 1}, 0.2f, 8, 10)); ...
canvas.drawBitmap(bitmap, 100, 100, paint);
![](https://ws3.sinaimg.cn/large/006tNc79ly1fig7g3ktlmj30kp09g0tl.jpg) å®ƒçš„æ„é€ æ–¹æ³•
`EmbossMaskFilter(float[] direction, float ambient, float specular, float
blurRadius)` çš„å‚æ•°é‡Œï¼Œ `direction` æ˜¯ä¸€ä¸ª 3 ä¸ªå…ƒç´ çš„æ•°ç»„ï¼ŒæŒ‡å®šäº†å…‰æºçš„æ–¹å‘ï¼› `ambient` æ˜¯ç¯å¢ƒå…‰çš„å¼ºåº¦ï¼Œæ•°å€¼èŒƒå›´æ˜¯
0 åˆ° 1ï¼› `specular` æ˜¯ç‚«å…‰çš„ç³»æ•°ï¼› `blurRadius` æ˜¯åº”ç”¨å…‰çº¿çš„èŒƒå›´ã€‚ ä¸è¿‡ç”±äºæˆ‘æ²¡æœ‰åœ¨é¡¹ç›®ä¸­ä½¿ç”¨è¿‡
`EmbossMaskFilter`ï¼Œå¯¹å®ƒçš„æ¯ä¸ªå‚æ•°å…·ä½“è°ƒèŠ‚æ–¹å¼å¹¶ä¸ç†Ÿï¼Œä½ æœ‰å…´è¶£çš„è¯è‡ªå·±ç ”ç©¶ä¸€ä¸‹å§ã€‚ ### 2.8 è·å–ç»˜åˆ¶çš„ Path
è¿™æ˜¯æ•ˆæœç±»çš„æœ€åä¸€ç»„æ–¹æ³•ï¼Œä¹Ÿæ˜¯æ•ˆæœç±»å”¯ä¸€çš„ä¸€ç»„ `get` æ–¹æ³•ã€‚ è¿™ç»„æ–¹æ³•åšçš„äº‹æ˜¯ï¼Œæ ¹æ® `paint` çš„è®¾ç½®ï¼Œè®¡ç®—å‡ºç»˜åˆ¶ `Path` æˆ–æ–‡å­—æ—¶çš„
**å®é™… Path** ã€‚ è¿™é‡Œä½ å¯èƒ½ä¼šå†’å‡ºä¸¤ä¸ªé—®é¢˜ï¼š 1\. ä»€ä¹ˆå«ã€Œå®é™… `Path`ã€ï¼Ÿ `Path` å°±æ˜¯
`Path`ï¼Œè¿™åŠ ä¸Šä¸ªã€Œå®é™…ã€æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ 2\. æ–‡å­—çš„ `Path` ï¼Ÿæ–‡å­—è¿˜æœ‰ `Path`ï¼Ÿ è¿™ä¸¤ä¸ªé—®é¢˜ï¼ˆå’¦å¥½åƒæœ‰å››ä¸ªé—®å·ï¼‰çš„ç­”æ¡ˆå°±åœ¨åé¢çš„å†…å®¹é‡Œã€‚
#### 2.8.1 getFillPath(Path src, Path dst) é¦–å…ˆè§£ç­”ç¬¬ä¸€ä¸ªé—®é¢˜ï¼šã€Œå®é™… `Path`ã€ã€‚æ‰€è°“å®é™… `Path`
ï¼ŒæŒ‡çš„å°±æ˜¯ `drawPath()` çš„ç»˜åˆ¶å†…å®¹çš„è½®å»“ï¼Œè¦ç®—ä¸Šçº¿æ¡å®½åº¦å’Œè®¾ç½®çš„ `PathEffect`ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼ˆçº¿æ¡å®½åº¦ä¸º 0ã€æ²¡æœ‰
`PathEffect`ï¼‰ï¼ŒåŸ `Path` å’Œå®é™… `Path` æ˜¯ä¸€æ ·çš„ï¼›è€Œåœ¨çº¿æ¡å®½åº¦ä¸ä¸º 0 ï¼ˆå¹¶ä¸”æ¨¡å¼ä¸º `STROKE` æ¨¡å¼æˆ–
`FLL_AND_STROKE` ï¼‰ï¼Œæˆ–è€…è®¾ç½®äº† `PathEffect` çš„æ—¶å€™ï¼Œå®é™… `Path` å°±å’ŒåŸ `Path` ä¸ä¸€æ ·äº†ï¼š
![](https://ws3.sinaimg.cn/large/006tNc79ly1fig7ggbut0j30rw0me76k.jpg) >
çœ‹æ˜ç™½äº†å—ï¼Ÿ é€šè¿‡ `getFillPath(src, dst)` æ–¹æ³•å°±èƒ½è·å–è¿™ä¸ªå®é™… `Path`ã€‚æ–¹æ³•çš„å‚æ•°é‡Œï¼Œ`src` æ˜¯åŸ `Path` ï¼Œè€Œ
`dst` å°±æ˜¯å®é™… `Path` çš„ä¿å­˜ä½ç½®ã€‚ `getFillPath(src, dst)` ä¼šè®¡ç®—å‡ºå®é™… `Path`ï¼Œç„¶åæŠŠç»“æœä¿å­˜åœ¨ `dst`
é‡Œã€‚ #### 2.8.2 getTextPath(String text, int start, int end, float x, float y,
Path path) / getTextPath(char[] text, int index, int count, float x, float y,
Path path) è¿™é‡Œå°±å›ç­”ç¬¬äºŒä¸ªé—®é¢˜ï¼šã€Œæ–‡å­—çš„ `Path`ã€ã€‚æ–‡å­—çš„ç»˜åˆ¶ï¼Œè™½ç„¶æ˜¯ä½¿ç”¨ `Canvas.drawText()`
æ–¹æ³•ï¼Œä½†å…¶å®åœ¨ä¸‹å±‚ï¼Œæ–‡å­—ä¿¡æ¯å…¨æ˜¯è¢«è½¬åŒ–æˆå›¾å½¢ï¼Œå¯¹å›¾å½¢è¿›è¡Œç»˜åˆ¶çš„ã€‚ `getTextPath()` æ–¹æ³•ï¼Œè·å–çš„å°±æ˜¯ç›®æ ‡æ–‡å­—æ‰€å¯¹åº”çš„ `Path`
ã€‚è¿™ä¸ªå°±æ˜¯æ‰€è°“ã€Œæ–‡å­—çš„ `Path`ã€ã€‚
![](https://ws2.sinaimg.cn/large/006tNc79ly1fig7gs0dc1j30i005mq3f.jpg) è¿™ä¸¤ä¸ªæ–¹æ³•ï¼Œ
`getFillPath()` å’Œ `getTextPath()` ï¼Œå°±æ˜¯è·å–ç»˜åˆ¶çš„ `Path`
çš„æ–¹æ³•ã€‚ä¹‹æ‰€ä»¥æŠŠå®ƒä»¬å½’ç±»åˆ°ã€Œæ•ˆæœã€ç±»æ–¹æ³•ï¼Œæ˜¯å› ä¸ºå®ƒä»¬ä¸»è¦æ˜¯ç”¨äºå›¾å½¢å’Œæ–‡å­—çš„è£…é¥°æ•ˆæœçš„ä½ç½®è®¡ç®—ï¼Œæ¯”å¦‚[è‡ªå®šä¹‰çš„ä¸‹åˆ’çº¿æ•ˆæœ](https://medium.com
/google-developers/a-better-underline-for-android-90ba3a2e4fb)ã€‚
![](https://ws3.sinaimg.cn/large/006tNc79ly1fig7h4hk1kj30d506q3yw.jpg) åˆ°æ­¤ä¸ºæ­¢ï¼Œ
`Paint` çš„ç¬¬äºŒç±»æ–¹æ³•â€”â€”æ•ˆæœç±»ï¼Œå°±ä¹Ÿä»‹ç»å®Œäº†ã€‚ ## 3 drawText() ç›¸å…³ `Paint` æœ‰äº›è®¾ç½®æ˜¯æ–‡å­—ç»˜åˆ¶ç›¸å…³çš„ï¼Œå³å’Œ
`drawText()` ç›¸å…³çš„ã€‚ æ¯”å¦‚è®¾ç½®æ–‡å­—å¤§å°ï¼š
![](https://ws3.sinaimg.cn/large/006tNc79ly1fig7hgo6ioj30jv089aat.jpg)
æ¯”å¦‚è®¾ç½®æ–‡å­—é—´éš”ï¼š
![](https://ws2.sinaimg.cn/large/006tNc79ly1fig7hp9k9kj30js070t99.jpg)
æ¯”å¦‚è®¾ç½®å„ç§æ–‡å­—æ•ˆæœï¼š
![](https://ws3.sinaimg.cn/large/006tNc79ly1fig7hwqeokj30dj09oaaz.jpg)
é™¤æ­¤ä¹‹å¤–ï¼Œ`Paint` è¿˜æœ‰å¾ˆå¤šä¸æ–‡å­—ç»˜åˆ¶ç›¸å…³çš„è®¾ç½®æˆ–è®¡ç®—çš„æ–¹æ³•ï¼Œéå¸¸è¯¦ç»†ã€‚ä¸è¿‡ç”±äºå¤ªè¯¦ç»†äº†ï¼Œç›¸å…³æ–¹æ³•å¤ªå¤šäº†ï¼ˆ`Paint` è¶…è¿‡ä¸€åŠçš„æ–¹æ³•éƒ½æ˜¯
`drawText()` ç›¸å…³çš„ï¼Œç®—ä¸ç®—å¤šï¼Ÿï¼‰ï¼Œå¦‚æœæ”¾åœ¨è¿™é‡Œè®²å®ƒä»¬çš„è¯ï¼Œå†…å®¹ä¼šæ˜¾å¾—æœ‰ç‚¹è¿‡é‡ã€‚æ‰€ä»¥è¿™ä¸€èŠ‚æˆ‘å°±ä¸è®²å®ƒä»¬äº†ï¼ŒæŠŠå®ƒä»¬æ”¾åœ¨ä¸‹ä¸€èŠ‚é‡Œå•ç‹¬è®²ã€‚ ## 4
åˆå§‹åŒ–ç±» è¿™ä¸€ç±»æ–¹æ³•å¾ˆç®€å•ï¼Œå®ƒä»¬æ˜¯ç”¨æ¥åˆå§‹åŒ– `Paint` å¯¹è±¡ï¼Œæˆ–è€…æ˜¯æ‰¹é‡è®¾ç½® `Paint` çš„å¤šä¸ªå±æ€§çš„æ–¹æ³•ã€‚ ### 4.1 reset() é‡ç½®
`Paint` çš„æ‰€æœ‰å±æ€§ä¸ºé»˜è®¤å€¼ã€‚ç›¸å½“äºé‡æ–° `new` ä¸€ä¸ªï¼Œä¸è¿‡æ€§èƒ½å½“ç„¶é«˜ä¸€äº›å•¦ã€‚ ### 4.2 set(Paint src) æŠŠ `src`
çš„æ‰€æœ‰å±æ€§å…¨éƒ¨å¤åˆ¶è¿‡æ¥ã€‚ç›¸å½“äºè°ƒç”¨ `src` æ‰€æœ‰çš„ `get` æ–¹æ³•ï¼Œç„¶åè°ƒç”¨è¿™ä¸ª `Paint` çš„å¯¹åº”çš„ `set` æ–¹æ³•æ¥è®¾ç½®å®ƒä»¬ã€‚ ###
4.3 setFlags(int flags) æ‰¹é‡è®¾ç½® flagsã€‚ç›¸å½“äºä¾æ¬¡è°ƒç”¨å®ƒä»¬çš„ `set` æ–¹æ³•ã€‚ä¾‹å¦‚ï¼š 
paint.setFlags(Paint.ANTI_ALIAS_FLAG | Paint.DITHER_FLAG); è¿™è¡Œä»£ç ï¼Œå’Œä¸‹é¢è¿™ä¸¤è¡Œæ˜¯ç­‰ä»·çš„ï¼š
paint.setAntiAlias(true); paint.setDither(true); `setFlags(flags)` å¯¹åº”çš„ `get`
æ–¹æ³•æ˜¯ `int getFlags()`ã€‚ å¥½äº†ï¼Œè¿™äº›å°±æ˜¯ `Paint` çš„å››ç±»æ–¹æ³•ï¼š **é¢œè‰²ç±»** ã€ **æ•ˆæœç±»** ã€ **æ–‡å­—ç»˜åˆ¶ç›¸å…³** ä»¥åŠ
**åˆå§‹åŒ–ç±»** ã€‚å…¶ä¸­é¢œè‰²ç±»ã€æ•ˆæœç±»å’Œåˆå§‹åŒ–ç±»éƒ½å·²ç»åœ¨è¿™èŠ‚é‡Œé¢è®²è¿‡äº†ï¼Œå‰©ä¸‹çš„ä¸€ç±»â€”â€”æ–‡å­—ç»˜åˆ¶ç±»ï¼Œä¸‹ä¸€èŠ‚å•ç‹¬è®²ã€‚ æœ€åå†å¼ºè°ƒä¸€éï¼š
**è¿™æœŸçš„å†…å®¹æ²¡å¿…è¦å…¨éƒ¨èƒŒä¼šï¼Œåªè¦çœ‹æ‡‚ã€ç†è§£ï¼Œè®°ä½æœ‰è¿™ä¹ˆä¸ªä¸œè¥¿å°±è¡Œäº†ã€‚ä»¥ååœ¨ç”¨åˆ°çš„æ—¶å€™ï¼Œå†æ‹å›æ¥ç¿»ä¸€ç¿»å°±è¡Œäº†ã€‚** ## ç»ƒä¹ é¡¹ç›®
ä¸ºäº†é¿å…è½¬å¤´å°±å¿˜ï¼Œå¼ºçƒˆå»ºè®®ä½ è¶çƒ­æ‰“é“ï¼Œåšä¸€ä¸‹è¿™ä¸ªç»ƒä¹ é¡¹ç›®ï¼š[HenCoderPracticeDraw2](https://github.com/hencoder/PracticeDraw2)
![](https://ws3.sinaimg.cn/large/006tNc79ly1fig7i3e4hej30si0fsq5f.jpg) ## ä¸‹æœŸé¢„å‘Š
ä¸‹æœŸæ˜¯æ–‡å­—ç»˜åˆ¶ä¸“åœºï¼Œæˆ‘å°†ä¼šèŠ±ä¸€æ•´æœŸçš„ç¯‡å¹…æ¥è¯¦è¿°æ–‡å­—çš„ç»˜åˆ¶ã€‚æƒ¯ä¾‹æ”¾å‡ºéƒ¨åˆ†é…å›¾ä½œä¸ºé¢„è§ˆï¼š
![](https://ws4.sinaimg.cn/large/006tNc79ly1fig7icra08j30do077js1.jpg)
![](https://ws2.sinaimg.cn/large/006tNc79ly1fig7ifhctmj30cx09dt9o.jpg)
![](https://ws2.sinaimg.cn/large/006tNc79ly1fig7iipafvj30l807675k.jpg)
![](https://ws2.sinaimg.cn/large/006tNc79ly1fig7inhstij30ff0alt9l.jpg) ## æ„Ÿè°¢
æ„Ÿè°¢å‚ä¸è¿™æœŸé¢„å‘å¸ƒå†…æµ‹çš„è¯»è€…ï¼š
[å°è¿ˆ](https://github.com/CodeXiaoMai)ã€[MadisonRong](https://github.com/MadisonRong)ã€å°äºã€æ‹ä¸Šä½ çš„çœ¸ã€[rubicAndroid](http://blog.csdn.net/my_truelove)ã€[miaoyongjun](https://github.com/miaoyongjun)ã€[ArchyWang](https://github.com/ArchyWang)ã€å­™å¿—å¸…ã€[czwathou](https://github.com/CzwAthou)ã€[Tim
Aimee](https://github.com/timaimee)ã€[codeå°ç”Ÿ](http://weibo.com/u/5551674121)
å¦å¤–ï¼Œå…¬å¼€æ‹›å‹Ÿå†…æµ‹è¯»è€…ï¼Œæ„¿æ„å¸®åŠ©å†…æµ‹çš„æ‰«ä¸‹é¢çš„ç åŠ ç¾¤å§ï¼ï¼ˆå·²ç»åŠ è¿‡ä¸€ç¾¤çš„å°±åˆ«åŠ è¿™ä¸ªäº†ï¼Œç»™åˆ«äººç•™ä¸ªåé¢ï¼Œä¸¤ä¸ªç¾¤å¾…é‡ä¸€æ ·çš„ã€‚ï¼‰
![](https://ws1.sinaimg.cn/large/006tNc79ly1fig7ja7it1j30hs0s1wgl.jpg) ## èµèµ
è€è§„çŸ©ï¼Œä½†ä½ çš„é’±æ¢ä¸æ¥ä»»ä½•å¢å€¼æœåŠ¡ï¼Œæ‰€ä»¥çœŸçš„è§‰å¾—èµå†ç»™é’±å“Ÿã€‚
![](https://ws4.sinaimg.cn/large/006tNc79ly1fig7ji8850j30km0d1mzp.jpg) * * *
## è®¢é˜… HenCoder å¾®ä¿¡å…¬ä¼—å·ï¼šHenCoderÂ Â Â Â å¾®åšï¼š[æ‰”ç‰©çº¿](https://weibo.com/rengwuxian)
çŸ¥ä¹ä¸“æ ï¼š[HenCoder](https://zhuanlan.zhihu.com/hencoder)
ç¨€åœŸæ˜é‡‘ï¼š[æ‰”ç‰©çº¿](https://juejin.im/user/552f20a7e4b060d72a89d87f)
![](https://ww1.sinaimg.cn/large/671477efly1fu4gsk3zs7j203l03l74d.jpg)
[](http://www.jiathis.com/share?uid=2139777) ä¸ºæ­£å¸¸ä½¿ç”¨æ¥å¿…åŠ›è¯„è®ºåŠŸèƒ½è¯·æ¿€æ´»JavaScript [
NextHenCoder Android å¼€å‘è¿›é˜¶ï¼šè‡ªå®šä¹‰ View 1-3 drawText() æ–‡å­—çš„ç»˜åˆ¶July 24, 2017
](/ui-1-3/) [ PreviousHenCoder Android å¼€å‘è¿›é˜¶: è‡ªå®šä¹‰ View 1-1 ç»˜åˆ¶åŸºç¡€July 10, 2017
](/ui-1-1/) ## æµè§ˆç½‘ç«™ * [é¦–é¡µ](http://hencoder.com/) *
[é¢ä¸–å®£è¨€](http://hencoder.com/tag/about/) * [HenCoder
Plus](https://plus.hencoder.com/) * [ç ä¸Šå¼€å­¦](http://kaixue.io/) * [è‡ªå®šä¹‰ View -ç»˜åˆ¶](http://hencoder.com/tag/hui-zhi/) * [è‡ªå®šä¹‰ View -å¸ƒå±€](http://hencoder.com/tag/bu-ju/) * [è‡ªå®šä¹‰ View -è§¦æ‘¸åé¦ˆ](http://hencoder.com/tag/chu-mo-fan-kui/) * [å®è·µ](http://hencoder.com/tag
/shi-jian/) * [HTTPS](http://hencoder.com/tag/https/) * [Git
æ•™ç¨‹](https://juejin.im/book/5a124b29f265da431d3c472e) ## å…³äº HenCoder è¿™æ˜¯ä¸€ä¸ªä¸ªäººçš„
Android æŠ€æœ¯åˆ†äº«ç«™ã€‚æˆ‘å¯¹å®ƒå……æ»¡æœŸå¾…ï¼Œæˆ‘è®¤ä¸ºå®ƒå¯ä»¥å¸®åŠ©åˆ°æ•´ä¸ªä¸­å›½çš„ Android ç•Œï¼Œä½†æˆ‘è¿˜ä¸ç¡®å®šã€‚æ‹­ç›®ä»¥å¾…ã€‚ ## å…³äºæˆ‘
æˆ‘æ˜¯æ‰”ç‰©çº¿ï¼Œ[Android GDE](https://developers.google.com/experts/people/kai-zhu)ï¼ˆ
Google è®¤è¯ Android å¼€å‘ä¸“å®¶ï¼‰ï¼Œå‰ Flipboard Android å·¥ç¨‹å¸ˆã€‚ GitHub å…¨çƒ Java æ’åç¬¬ 124 ä½ï¼Œåœ¨
[GitHub](https://github.com/rengwuxian) ä¸Šæœ‰ 6.1k followers å’Œ 9.2k stars ï¼Œä¸ªäººçš„
Android å¼€æºåº“
[MaterialEditText](https://github.com/rengwuxian/MaterialEditText/)
è¢«å…¨ä¸–ç•Œå¤šä¸ªé¡¹ç›®å¼•ç”¨ï¼Œå…¶ä¸­åŒ…æ‹¬åœ¨å…¨çƒæ‹¥æœ‰ 5 äº¿ç”¨æˆ·çš„æ–°é—»é˜…è¯»è½¯ä»¶ Flipboard ã€‚æ›¾å¤šæ¬¡åœ¨ Google Developer Group
Beijing çº¿ä¸‹åˆ†äº«ä¼šä¸­æ‹…ä»» Android éƒ¨åˆ†çš„è®²å¸ˆã€‚ä¸ªäººæŠ€æœ¯æ–‡ç« ã€Š[ç»™ Android å¼€å‘è€…çš„ RxJava
è¯¦è§£](https://gank.io/post/560e15be2dca930e00da1083)ã€‹å‘å¸ƒåï¼Œåœ¨å›½å†…å¤šä¸ªå…¬å¸å’Œå›¢é˜Ÿå†…éƒ¨è¢«è½¬å‘åˆ†äº«å’Œä½œä¸ºå›¢é˜ŸæŠ€æœ¯ä¼šè®®çš„ä¸»è¦èµ„æ–™æ¥æºï¼Œä»¥åŠé€†å‘ä¼ æ’­åˆ°äº†ç¾å›½ä¸€äº›å¦‚
Google ã€ Uber ç­‰å…¬å¸çš„éƒ¨åˆ†åäººå›¢é˜Ÿã€‚ * rengwuxian@gmail.com å…³é—­ä¾§æ 
[__å¾®åš](https://github.com/rengwuxian)
[__GitHub](https://github.com/rengwuxian)
[__GitHub](https://github.com/rengwuxian) __Back to the top
[HenCoder](http://hencoder.com) Â© 2019 Curious theme by
[JustGoodThemes](https://justgoodthemes.com/)

